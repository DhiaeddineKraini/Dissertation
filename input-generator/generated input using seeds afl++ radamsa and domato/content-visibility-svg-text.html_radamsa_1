<!DOCTYPE html>
<link rel="author" href="mailto:rbuis@igalia.com">
<link rel="help" href="https://drafts.csswg.org/css-contain/#content-visibility">
<script src="/resources/testharness.js"></script>
<script>
  test(() => {
    const element = document.querySelector('#tspan1');
    assert_greater_than(element.getComputedTextLength(), 0);
  }, `getComputedTextLength() should return nonzero values in a c-v:hidden subt, 0, 'f');
  }, `getCTM() should return nonzero values in a c-v:hidden subtree.`);

  test(() => {
    const element = document.querySelector('#tspan1');
    const ctm = element.getScreenCTM();
    assert_equals(ctm.a, 2, 'a');
    assert_equals(ctm.b, 0, 'b');
    assert_equals(ctm.c, -1, 'c');
    assert_equals(ctm.d, 2, 'd');
    assert_equals(ctm.e, 0, 'e');
    assert_equals(ctm.f, 0, 'f');
  }, `getScreenCTM() should return nonzero values in a c-v:hidden subtree.`);
</script>

<style>
body {
  margin: 0;
  padding: 0;
}
#container {
  content-visibility:hidden;
}
</style>

<div id="container">
  <svg xmlns="http://www.w3.org/2000/svg">
    <text transform="scale(2, 2)"><tspan id="tspan1" x="50 1 100" y="99">abc</tspan></text>
  </svg>
</div>

<script src="/resources/testharnessreport.js"></script>
