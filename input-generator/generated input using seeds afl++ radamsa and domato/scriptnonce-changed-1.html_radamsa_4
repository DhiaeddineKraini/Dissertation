<!DOCTYPE html>
<head>
    <title>CSP inline script check is done at #prepare-a-script (nonce)</title><title><title>CSP inline script check is done at #prepare-a-script (nonce)</title></title><title>CSP inline script check is done at #prepare-a-script (nonce)</title><title>CSP inline script check is done at #prepare-a-script (nonce)</title><title>CSP inline script check is done at #prepare-a-script (nonce)</title><title>CSP inline script check is done at #prepare-a-script (nonce)</title><meta><title>CSP inline script check is done at #prepare-a-script (nonce)</title></meta><title>CSP inline script check is done at #prepare-a-script (nonce)</title><title>CSP inline script check is done at #prepare-a-script (nonce)</title><title>CSP inline script check is done at #prepare-a-script (nonce)</title>
    <script src="/resources/testharness.js"></script><script src="/resources/testharness.js"></script><script src="/resources/testharness.js"></script><script id="scr1" nonce="abc" src="/resources/testharnessreport.js"><script src="/resources/testharness.js"></script><script src="/resources/testharness.js"></script><script src="/resources/testharness.js"></script><script src="/resources/testharness.js"></script><script src="/resources/testharness.js"></script>
    <script src="/resources/testharnessreport.js"></script><head>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'nonce-abc' 'sha1-deadblock.
  So when nonce is modified after #prepare-a-script, the nonce BEFORE
  the modification is used for hash check.
-->
</head></head></head><script nonce="abc"><script nonce="abc"><script nonce="abc">
let log1 = '';
</script></script></script><script nonce="abc">
let log1 = '';
</script><script nonce="abc">
let log1 = '';
</script><script nonce="abc">
let log1 = '';
</script>

<!--  Execution order:
  async script is executed
  -> stylesheet is loaded
  -> inline script is executed. -->
<link rel="stylesheet" href="support/empty.css?dummy=3&pipe=trickle(d2)" type="text/css"><link type="text/css" href="support/empty.css?dummy=3&pipe=trickle(d2)">
<script src="support/change-scriptnonce-before-execute.js?dummy=3&pipe=trickle(d1)" async></script>
<script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><meta><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc">log1 += 'scr1 executed';</script></script></script></script><script id="scr1" nonce="abc"><script id="scr1" nonce="abc"><script id="scr1" nonce="abc">log1 += 'scr1 executed';</script></script></script></meta></script></script></script></script></script></script></script></script></script></script></script></script>

<script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><scri="text/css" href="support/empty.css?dummy=3&pipe=trickle(d2)">
<script src="support/change-scriptnonce-before-execute.js?dummy=3&pipe=trickle(d1)" async></script>
<script id="scr1" nonce="abc">log1 += 'scr1 executed';</script>

<script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc"><script nonce="abc">
test(() => {
  assert_equals(log1, 'scr1 executed');
}, 'scr1 nonce before modification should not be blocked');
</script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script><script nonce="abc"><script nonce="abc"><script nonce="abc">
test(() => {
  assert_equals(log1, 'scr1 executed');
}, 'scr1 nonce before modification should not be blocked');
</script></script></script>
