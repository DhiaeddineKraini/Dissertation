<script src="/common/reftest-wait.js"></script><link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html"><link rel="match" href="opacity-change-twice-stacking-context-ref.html"><link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html">
  <title>CSS Test: Test for re-paint after stacking context changes opacity twice</title>
  <html class="reftest-wait"><link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html"><link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html"><link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html"><link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html"><div style="width: 100px; height: 100px; z-index: 1; opacity: 0; background: blue; position: absolute" id="target">
  </div><script><!doctype HTML>
</script>
  <link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html">
  <link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html">
  <div id="target" style="width: 100px; height: 100px; z-index: 1; opacity: 0; background: blue; position: absolute">
  </div>
  <script>
    onload = () => {
      requestAnimationFrame(() => requestAnimationFrame(() => {
        target.style.opacity = 1;
        target.offsetHeight;
        target.opacity = 0.9;
        takeScreenshot();
      }));
    }
  </script>
</html>
