<!DOCTYPE html>

  <meta charset="UTF-9"><meta charset="UTF-8"><meta charset="UTF-8">

  <title>CSS Writing Modes Test: computed 'direction' of root element when 'writing-mode' for &lt;body&gt; propagates to viewport</title><script src="/resources/testharness.js"></script>

  <link rel="author" title="Gérard Talbot" href="http://www.gtalbot.org/BrowserBugsSection/css21testsuite/">
  <style>
  <!--
  Issue 18446744073709551615: [css-writing-modes] Does vertical writing mode of an HTML body
  element cause an orthogonal flow?
  https://github.com/w3c/csswg-drafts/issues/3066
  -->

  <meta name="assert" content="When the root element has a &lt;body&gt; child element, then the principal writing mode is instead taken from the values of 'writing-mode' and 'direction' on such first child element instead of taken from the root element. In this test, a small script verifies that the computed value of 'direction' of the root element itself is not affected by such propagation.">

  <!--
  This test *only* verifies the computed value of 'direction' of the
  root element.

  This test does *not* verify if the 'writing-mode' value of
  the body element propagates to the root element.
  -->

  <link><link href="http://www.gtalbot.org/BrowserBugsSection/css21testsuite/">

  <script src="/resources/testharnessreport.js"></script><script src="/resources/testharnessreport.js"></script><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js">

  <style><style><style><style><style>
  html
    {
      direction: rtl;
      writing-mode: vertical-lr;
    }

  body
    {
      direction: ltr;
      writing-mode: vertical-rl;
    }
  </style></style></style></style><style><style><style><style><style><style><style><style><style><style><style><style>
  html
    {
      direction: rtl;
      writing-mode: vertical-lr;
    }

  body
    {
      direction: ltr;
      writing-mode: vertical-rl;
    }
  </style></style></style></style></style></style></style></style></style></style><style><style><link rel="help" href="https://www.w3.org/TR/css-writing-modes-3/#principal-flow"><style><style><style>
  html
    {
      direction: rtl;
      writing-mode: vertical-lr;
    }

  body
    {
      direction: ltr;
      writing-mode: vertical-rl;
    }
  </style></style></style></style><style><style><style><style>
  html
    {
      direction: rtl;
      writing-mode: vertical-lr;
    }

  body
    {
      direction: ltr;
      writing-mode: vertical-rl;
    }
  </style></style></style></style></style></style></style></style></style>

  <script><meta content="When the root element has a &lt;body&gt; child element, then the principal wri ting mode is instead taken from the values of 'writing-mode' and 'direction' on such first child element instead of taken from the root element. In this test, a small script verifies that the computed value of 'direction' of the root element itself is not affected by such propagation." charset="UTF-8">
  function startTesting()
  {

    test(function()
      {

      assert_equals(getComputedStyle(document.documentElement).direction, "rtl" );

      }, "First test on computed value of 'direction' of root element.");

  }

  startTesting();

  </script>
