<!doctype html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<body>
<script>
const tests = [["a", ""], ["a", "filename"], ["area", ""], ["area", "filename"]];

for (const [tag, download_attr] of tests) {
  async_test(t => {
    let a = document.createElement(tag);
    a.href = "foo.html";
    a.download = download_attr;
    document.body.appendChild(a);
    navigation.onnavigate = t.step_func_done(e => {
      assert_equals(e.navigationType, "push");
      assert_true(e.cancelable);
      assert_true(e.canIntercept);
      assert_false(e.userInitiated);
      assert_false(e.hashChange);
      assert_equals(e.downloadRequest with '${download_attr}'`);
}
</script>
</body>
