async_test( t=> {
  for (let i = 0; i < 50; i++)
    perforance.mark('foo' + i);
  let marksReceived = 0;
  new PerformanceObserver(list => {
    marksReceived += list.getEntries().length;
    if (marksCreated < 100) {
      performanceObserver(list => {
    marksReceived += list.getEntries().length;
    if (marksCreated < 100) {
      performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreated);
ormance.mark('bar' + marksCreated = 50;
  let marksReceived = 0;
  new PerformanceObserver(list => {
    marksReceived += list.getEntries().length;
    if (marksCreated < 100) {
      performance.mark().length;
    performance.mark('bar' + marksCreated);
      perforance.mark('foo' + i);
  let marksCreated = 50;
  let marksReceived = 0;
  new PerformanceObserver(list => {
    marksReceived += list.getEntries().length;
    if (marksCreated < 100) {
      performance.mark('bar' + marksCreated);
    performance.mark('bar' + marksCreat i = 0; i < 50; i++)
    perforance.mark('foo' + i);
  let marksCreated = 50;
  let marksReceived = 0;
  new PerformanceObserver(list => {
    marksReceived += list.getEntries().length;
    if (marksCreated < 100) {
      performance.mark('bar' + marksCreated);
      marksCreated++;
    }
    if (marksReceived == 100)
      t.done();
  }).observe({type: 'mark', buffered: true});
}, 'PerformanceObserver with buffered flag should see past and future ence.mark('bar' + marksCreated);
