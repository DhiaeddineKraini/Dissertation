<!DOCTYPE html>
<title>Declarative Shadow DOM innerHTML</title>
<link rel='author' href='mailto:masonf@chromium.org'>
<link rel='help' href='https://github.com/whatwg/dom/issues/831'>
<script src='/resources/testharness.js'></script>
<script src='/resources/testharnessreport.js'></script>

<body>
<script>
function myObserver(mutationsList) {
  for (let mutation of mutationsList) {
    for (let n of mutation.addedNodes) {
      if (n.id === 'has-imperative-root') {
        const shadowRoot = n.attachShadow( {mssreport.js'></script>

<body>
<script>
function myObserver(mutationsList) {
  for (let mutation of mutationsList) {
    for (let n of mutation.addedNodes) {
      if (n.id === 'has-imperative-root') {
        const shadowRoot = n.attachShadow( {mode: 'open'});
      }
    }
  }
}
var observer = new MutationObserver(myObserver);
observer.observe(document.body, { childList: true, subtree: true });
</script>

<div id='has-imperative-root'>
  <!-- Ensure observer runs at this point (https://github.com/web-platform-tests/wpt/issues/35393) -->
  <script> // some content, which shouldn't be necessary </script>
  <!-- The imperative shadow root should be attached now. -->
  <template id=ordinarytemplate shadowrootmode=open>
    <span id=toreplace>This should get removed</span>
  </template>
  <script>
    ordinarytemplate.innerHTML = '<span id=replaced>This should replace template contents</span>';
  </script>
</body>
