<!DOCTYPE html>
<meta charset="utf-8"><meta charset="utf-8">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script><body>
<script src="resources/helpers.js"></script><script src="resources/helpers.js">
</script>

<body><script src="resources/helpers.js"></script><script>
"use strict";
promise_test(async t => {
  const sentinequals(history.length, startingHistoryLength, "Inserting the under-test iframe must not change history.length");

  await waitForLoadAllowingIntermediateLoads(t, iframe, afterReplacementURL);
  assert_equals(history.length, startingHistoryLength + 1, "history.length must increase");
}, "No replace during pageshow, triggered by window.open(_self) on an iframe");
</script><script>
"use strict";
promise_test(async t => {
  const sentinequals(history.length, startingHistoryLength, "Inserting the under-test iframe must not change history.length");

  await waitForLoadAllowingIntermediateLoads(t, iframe, afterReplacementURL);
  assert_equals(history.length, startingHistoryLength + 1, "history.length must increase");
}, "No replace during pageshow, triggered by window.open(_self) on an iframe");
</script><script><script><script><script>
"use strict";
promise_test(async t => {
  const sentinequals(history.length, startingHistoryLength, "Inserting the under-test iframe must not change history.length");

  await waitForLoadAllowingIntermediateLoads(t, iframe, afterReplacementURL);
  assert_equals(history.length, startingHistoryLength + 1, "history.length must increase");
}, "No replace during pageshow, triggered by window.open(_self) on an iframe");
</script></script></script></script>
