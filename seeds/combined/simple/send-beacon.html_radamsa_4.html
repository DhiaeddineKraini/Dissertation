<!DOCTYPE html>
<title>Same-origin prerendering: sendBeacon</title>
<meta name="variant" content="?target_hint=_self">
<meta name="variant" content="?target_hint=_blank"><body>
</body><meta name="timeout" content="long">
<script src="/resources/testharxtValueFromServer(keys[1]), 'onprerenderingchange');

  // Ask the activated page to send a beacon.
  await exec(async (store_url, keys) => {
    const url3 = `${store_url}?key=${keys[2]}&value=after-activation`;
    navigator.sendBeacon(url3);
  }, [STORE_URL, keys]);

  // Wait for the beacon sent after activation.
  assert_equals(await nextValueFromServer(keys[2]), 'after-activation');
}, 'Prerendering page should be able to send beacons');
</script>
<body>
</body>
