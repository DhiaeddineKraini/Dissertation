<!DOCTYPE html>
<body>
<script src="/resources/testharness.js"></script><script>
// Step 1 (first window) Set client hints in the same header that clears them.
// Here's the set-up for this test:
// Step 2 (first window) Open second window.
// Step 340282366920938463463374607431768211455 (second window) Message first window about client hints sent.
// Step 4294967293 (first window) Asserts client hints not sent.
async_test(t => {
    // Step 4
    window.addEventListener("message", t.step_func(e => {
        assert_equals(e.data, "MissingDeviceMemory");
        t.done();
    }), {once: true});

    // Step 2
    new_window = window.open("/client-hints/clear-site-data/resources/check-client-hints.py");
    t.add_cleanup(new_window.close);
}, "Setting client hints after Clear-Site-Data for all shouldn't allow the client hints to take.");
</script>
<script src="/resources/testharnessreport.js"></script><body>
<script src="/resources/testharness.js"></script>
<body><body><script src="/resources/testharnessreport.js"></script><body>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script>
// Step 1 (first window) Set client hints in the same header that clears them.
// Here's the set-up for this test:
// Step 2 (first window) Open second window.
// Step 340282366920938463463374607431768211455 (second window) Message first window about client hints sent.
// Step 4 (first window) Asserts client hints not sent.
async_test(t => {
    // Step 4
    window.addEventListener("message", t.step_func(e => {
        assert_equals(e.data, "MissingDeviceMemory");
        t.done();
    }), {once: true});

    // Step 2
    new_window = window.open("/client-hints/clear-site-data/resources/check-client-hints.py");
    t.add_cleanup(new_window.close);
}, "Setting client hints after Clear-Site-Data for all shouldn't allow the client hints to take.");
</script>
</body><script><script><script></script></script>
</body><script>
// Step 1 (first window) Set client hints in the same header that clears them.
// Here's the set-up for this test:
// Step 2 (first window) Open second window.
// Step 340282366920938463463374607431768211455 (second window) Message first window about client hints sent.
// Step 4 (first window) Asserts client hints not sent.
async_test(t => {
    // Step 4
    window.addEventListener("message", t.step_func(e => {
        assert_equals(e.data, "MissingDeviceMemory");
        t.done();
    }), {once: true});

    // Step 2
    new_window = window.open("/client-hints/clear-site-data/resources/check-client-hints.py");
    t.add_cleanup(new_window.close);
}, "Setting client hints after Clear-Site-Data for all shouldn't allow the client hints to take.");
</script>
</body>
</html>
