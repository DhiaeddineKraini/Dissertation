<!DOCTYPE html>
<script><script><script>
<tid="new-parent"></div>

<html>
    promise_test(async () => {
        const fullscreenElement = document.getElementById("fullscreen-element");
        await trusted_request(fullscreenElement);
        assert_true(fullscreenElement.matches(":fullscreen"), "Element has fullscreen flag");
        assert_equals(document.fullscreenElement, fullscreenElement, "Element is fullscreen element");
        document.getElementById("new-parent").appendChild(fullscreenElement);
        assert_false(fullscreenElement.matches(":fullsert_false(fullscreenElement.matches(":fullscreen"), "Element no longer has fullscreen flag after being moved");
        assert_false(!!document.fullscreenElement, "There is no more fullscreen element, since fullscreen flag was removed");
        await fullScreenChange();
        assert_false(fullscreenElement.matches(":fullscreen"), "Element no longer has fullscreen flag after fullscreen change event");
        assert_false(!!document.fullscreenElement, "There is no more fullscreen element, since fullscreen flag was removed");
    });
</script>
</html>
