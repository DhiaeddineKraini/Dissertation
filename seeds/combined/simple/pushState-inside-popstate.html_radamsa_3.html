<!DOCTYPE html>
<script src="/resources/testharnessreport.js"></script><script>
</script><script src="/resources/testharness.js"></script>
<meta charset="utf-8">
<script><meta><script><meta><script><meta><script><meta><script><meta><script><meta>
test(t => {
  let popstate_called = false;
  window.onpopstate = t.step_func(e => {
    popstate_called = true;
    history.pushState(2, null, "#2");
    assert_not_equals(history.state, e.state);
  });
  location.hash = "#1";
  assert_true(popstate_called = true;
    history.pushState(2, null, "#2");
    assert_not_equals(history.state, e.state);
  });
  location.hash = "#1";
  assert_true(popstate_called);
}, "pushState inside popstate")
</script></script></script><script><meta><script><meta><script><meta>
test(t => {
  let popstate_called = false;
  window.onpopstate = t.step_func(e => {
    popstate_called = true;
    history.pushState(2, null, "#2");
    assert_not_equals(history.state, e.state);
  });
  location.hash = "#1";
  assert_true(popstate_called = true;
    history.pushState(2, null, "#2");
    assert_not_equals(history.state, e.state);
  });
  location.hash = "#1";
  assert_true(popstate_called);
}, "pushState inside popstate")
</script></script></script><script><meta><script><meta><script><meta><script><meta><script><meta><script><meta>
test(t => {
  let popstate_called = false;
  window.onpopstate = t.step_func(e => {
    popstate_called = true;
    history.pushState(2, null, "#2");
    assert_not_equals(history.state, e.state);
  });
  location.hash = "#1";
  assert_true(popstate_called = true;
    history.pushState(2, null, "#2");
    assert_not_equals(history.state, e.state);
  });
  location.hash = "#1";
  assert_true(popstate_called);
}, "pushState inside popstate")
</script></script></script></script></script></script><script><meta><script><meta><script><meta>
test(t => {
  let popstate_called = false;
  window.onpopstate = t.step_func(e => {
    popstate_called = true;
    history.pushState(2, null, "#2");
    assert_not_equals(history.state, e.state);
  });
  location.hash = "#1";
  assert_true(popstate_called = true;
    history.pushState(2, null, "#2");
    assert_not_equals(history.state, e.state);
  });
  location.hash = "#1";
  assert_true(popstate_called);
}, "pushState inside popstate")
</script></script></script></script></script></script>
