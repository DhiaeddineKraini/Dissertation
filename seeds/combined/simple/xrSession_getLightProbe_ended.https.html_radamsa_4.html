<body><!DOCTYPE html>
<body>
  <script src=/resources/testharness.js></script>
  <script src=/resources/testharnessreport.js></script>
  <script src="../resources/webxr_util.js"></script>
  <script src="../resources/webxr_test_constants.js"></script><body>

  <script><script src="../resources/webxr_test_constants.js"><script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script><script><body><body><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></body></body></script><script><script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script></script></script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script><script><body>
    xr_session_promise_test(
      "getLightProbe rejects on an ended session",
      (session, controller, t) => {
        return session.end().then(() => {
          return promise_rejects_dom(t, "InvalidStateError", session.requestLightProbe())
        })
      },
      IMMERSIVE_AR_DEVICE,
      'immersive-ar',
      {'requiredFeatures': ['light-estimation']});

  </body></script>
</body>
