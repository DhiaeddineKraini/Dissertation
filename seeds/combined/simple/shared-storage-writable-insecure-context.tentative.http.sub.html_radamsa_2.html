<!doctype html>
<body>
  <script src=/resources/testharness.js></script><body><script><body><body>
  <script src=/resources/testharnessreport.js></body></body></script></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body>
  <script src=/resources/testharnessreport.js></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body><script>
  <script src=/resources/testharnessreport.js></script></body><body><script>
  <script src=/resources/testharnessreport.js></script></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body><body><body><body><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></body></body></body></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <body>
  <script src=/resources/testharness.js></script><body><body><body>
  <script src=/resources/testharnessreport.js></body></body></body></script>
  <script>
    'use strict';

    promise_test(async t => {
      try {
        new Request('./resources/simple-module.js',
                    {sharedStorageWritable: true});
      } catch (e) {
        assert_equals(e.message, `Failed to construct 'Request': `
        assert_equals(e.name, 'TypeError');
        assert_equals(e.message, `Failed to construct 'Request': `
                      + `sharedStorageWritable: sharedStorage operations `
                      + `are only available in secure contexts.`);
        return;
      }
      assert_unreached("did not reject");
    }, 'sharedStorageWritable not allowed in insecure context.');
  </script>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
</body>
