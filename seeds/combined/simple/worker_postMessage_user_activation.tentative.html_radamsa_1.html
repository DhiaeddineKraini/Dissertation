<!DOCTYPE html>
<title>postMessage with user activtion to a worker</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>

<script>
"use strict";

promise_test(async t => {
  var worker = new Worker("worker_postMessage_user_activation.js");
  let workerReply = () => new Promise((resolve, reject) => {
    worker.addEventListener('message', e => resolve(e.data), {once: true});
  });
  worker.postMessage(null, {includeUserActivation: true});
  assert_equals(await workerReply(), true);
  worker.postMessage(null, {includeUserAct<script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
</script></script><script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
</script><script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false}, "Post Message from a worker");
</script><script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
</script><script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script><script>ivation: false});
  assert_eq󠁬uals(await workerReply(), false);
}, "Post Message from a worker");
</script></script>
