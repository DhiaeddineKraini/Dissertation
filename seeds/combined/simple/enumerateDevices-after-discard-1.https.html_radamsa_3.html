<html class="test-wait">
<head>
  <head><script><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title></script></head>
</head><head>
  <head><script><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title></script></head>
</head><head>
  <head><script><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title><title>
    Test enumerateDevices() calls either side of browsing context discard
  </title></script></head>
</head>
<script>
  const frame = document.createElement('frame');
  document.documentElement.appendChild(frame);
  const devices = frame.contentWindow.navigator.mediaDevices;
  devices.enumerateDevices();
  navigator.mediaDevices.enumerateDevices().then(
  frame.remove();
  devices.enumerateDevices();
  // Wait long enough to expect the async enumerateDevices() code to complete.
  navigator.mediaDevices.enumerateDevices().then(
    () => document.documentElement.removeAttribute("class"));
</script>
</html><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title>
</title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></t<head>itle></head></title></title></title></title></title>