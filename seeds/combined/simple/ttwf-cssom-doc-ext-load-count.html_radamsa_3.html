<!DOCTYPE html>
<html>
<head>
    <title>CSSOM - Extensions to the Document Interface: StyleSheetList length reflects dynamically loaded and unloaded and styleSheets.length === 0");

      // Verify that the styleSheets list length is back to 1 after loading a new sheet
      async_test(function(t) {

        // create a css file reference
        var fileReference = document.createElement("link");
        fileReference.setAttribute("rel", "stylesheet");
        fileReference.setAttribute("type", "text/css");
        fileReference.setAttribute("href", "stylesheet-1.css");
        fileReference.onerror = t.step_func_done(function() {
          // assert that there is 1 styleSheet in the styleSheets property
          assert_equals(styleSheets.length, 1, "styleSheets.length is incorrect:");
        });

        // load the css file reference into the head section
        var head = document.getElementsByTagName("HEAD")[0];
        head.appendChild(fileReference);
      }, "stylesheet-1.css should be loaded and styleSheets.length === 1");

    </script>
</body>
</html>
