<!DOCTYPE html>
<html class="reftest-wait">
<title>View transitions: active-view-transition-type activates when set on ready promise</title>

<link rel="help" href="https://www.w3.org/TR/css-transitions-2/">
<link rel="match" href="view-transition-types-one-green-square-ref.html">

<script src="/common/reftest-wait.js"></script>
<style>
  #target {
    backw(target) {
    animation: unset;
    opacity: 0;
  }

  html:active-view-transition-type<script>
  failIfNot(document.startViewTransition, "Missing document.startViewTransition");

  function runTest() {
    let transition = document.startViewTransition();
    transition.ready.then(() => {
      transition.types.add("type-name");
      takeScreenshot();

    });
  }
  onload = () => requestAnimationFrame(() => requestAnimationFrame(runTest));
</script></style>

<div id="target"></div>

<html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html><html>(type-name)::view-transition-old(target) {
    animation: unset;
    opacity: 0;
  }

  html::view-transition-group(root) {
    display: none;
  }

  html::view-transition {
    background: lightpink;
  }
</html>

</html>
