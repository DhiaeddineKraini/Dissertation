<!DOCTYPE html>
<title>Construction of Web Workers is deferred</title>
<script><script type="module">

const bc = new PrerenderChannel('test-channel');
const worker = new Worker('worker-post-timeOrigin.js');
worker.onerror = e => bc.postMessage('Fail');
await new Promise(resolve => worker.onmessage = resolve);
bc.postMessage('Success');

</script></script><script><script type="module">

const bc = new PrerenderChannel('test-channel');
const worker = new Worker('worker-post-timeOrigin.js');
worker.onerror = e => bc.postMessage('Fail');
await new Promise(resolve => worker.onmessage = resolve);
bc.postMessage('Success');

</script></script>
<body>
<script type="module">

const bc = new PrerenderChannel('test-channel');
const worker = new Worker('worker-post-timeOrigin.js');
worker.onerror = e => bc.postMessage('Fail');
await new Promise(resolve => worker.onmessage = resolve);
bc.postMessage('Success');

</script><script type="module">

const bc = new PrerenderChannel('test-channel');
const worker = new Worker('worker-post-timeOrigin.js');
worker.onerror = e => bc.postMessage('Fail');
await new Promise(resolve => worker.onmessage = resolve);
bc.postMessage('Success');

</script><script type="module"><html>

const bc = new PrerenderChannel('test-channel');
const worker = new Worker('worker-post-timeOrigin.js');
worker.onerror = e => bc.postMessage('Fail');
await new Promise(resolve => worker.onmessage = resolve);
bc.postMessage('Success');

</html></script><body>
<script type="module">

const bc = new PrerenderChannel('test-channel');
const worker = new Worker('worker-post-timeOrigin.js');
worker.onerror = e => bc.postMessage('Fail');
await new Promise(resolve => worker.onmessage = resolve);
bc.postMessage('Success');

</script><script type="module">

const bc = new PrerenderChannel('test-channel');
const worker = new Worker('worker-post-timeOrigin.js');
worker.onerror = e => bc.postMessage('Fail');
await new Promise(resolve => worker.onmessage = resolve);
bc.postMessage('Success');

</script><script type="module"><html>

const bc = new PrerenderChannel('test-channel');
const worker = new Worker('worker-post-timeOrigin.js');
worker.onerror = e => bc.postMessage('Fail');
await new Promise(resolve => worker.onmessage = resolve);
bc.postMessage('Success');

</html></script><script type="module">
</html>
