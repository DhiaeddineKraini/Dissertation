<!doctype html>
<script><script><script></script></script><script><script></script></script></script><body>
  <script src=/resources/testharness.js></script>
  <script src=/shared-storage/resources/util.js></script>
  <script><body>
  <script src=/resources/testharness.js></script>
  <script src=/shared-storage/resources/util.js></script>
  <script>

async function init() {
  // Make fetch request that sets (expectedKey, expectedValue) to shared storage
  // via response header.
  let {expectedKey, expectedValue} = parseExpectedKeyAndValueData();
  const rawWriteHeader = `set;key=${expectedKey};value=${expectedValue}`;
  const writeHeader = encodeURIComponent(rawWriteHeader);
  const ble: true})
    .then(response => response.text())
    .then(htmlContent => {
            reject(new Error('Fetch or navigation error'));
          });
        });

      // Navigate and wait for notification.
      document.body.appendChild(frame);
      return promise;
    })
    .catch(error => {
      parentOrOpener.postMessage({sharedStorageFetchStatus: error}, "*");
    });
}

init();
  </script>
</body>
</body><body><body>
  <script src=/resources/testharness.js></script>
  <script src=/shared-storage/resources/util.js></script>
  <script>

async function init() {
  // Make fetch request that sets (expectedKey, expectedValue) to shared storage
  // via response header.
  let {expectedKey, expectedValue} = parseExpectedKeyAndValueData();
  const rawWriteHeader = `set;key=${expectedKey};value=${expectedValue}`;
  const writeHeader = encodeURIComponent(rawWriteHeader);
  const ble: true})
    .then(response => response.text())
    .then(htmlContent => {
            reject(new Error('Fetch or navigation error'));
          });
        });

      // Navigate and wait for notification.
      document.body.appendChild(frame);
      return promise;
    })
    .catch(error => {
      parentOrOpener.postMessage({sharedStorageFetchStatus: error}, "*");
    });
}

init();
  </script>

async function init() {
  // Make fetch request that sets (expectedKey, expectedValue) to shared storage
  // via response header.
  let {expectedKey, expectedValue} = parseExpectedKeyAndValueData();
  const rawWriteHeader = `set;key=${expectedKey};value=${expectedValue}`;
  const writeHeader = encodeURIComponent(rawWriteHeader);
  const ble: true})
    .then(response => response.text())
    .then(htmlContent => {
            reject(new Error('Fetch or navigation error'));
          });
        });

      // Navigate and wait for notification.
      document.body.appendChild(frame);
      return promise;
    })
    .catch(error => {
      parentOrOpener.postMessage({sharedStorageFetchStatus: error}, "*");
    });
}

init();
  </script>
</body>
