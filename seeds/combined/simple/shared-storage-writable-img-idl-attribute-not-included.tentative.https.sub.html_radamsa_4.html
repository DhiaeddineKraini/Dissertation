<!doctype html>
<body>
  <script src=/resources/testharness.js></script>
  <script src=/resources/testharnessreport.js></script>
  <script src=/common/utils.js></script>
  <script src=/fenced-frame/resources/utils.js></script>
  <script src=/shared-storage/resources/util.js></script>
  <script src=/shared-storage/resources/util.sub.js></script>
  <script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]> via JS for cross origin img');
  </script>
</body><body>
  <script src=/resources/testharness.js></script>
  <script src=/resources/testharnessreport.js></script>
  <script src=/common/utils.js></script>
  <script src=/fenced-frame/resources/utils.js></script>
  <script src=/shared-storage/resources/util.js></script>
  <script src=/shared-storage/resources/util.sub.js></script>
  <script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]> via JS for cross origin img');
  </script>
</body><body>
  <script src=/resources/testharness.js></script>
  <script src=/resources/testharnessreport.js></script>
  <script src=/common/utils.js></script>
  <script src=/fenced-frame/resources/utils.js></script>
  <script src=/shared-storage/resources/util.js></script><body>
  <script src=/shared-storage/resources/util.sub.js></script>
  <script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]> via JS for cross origin img');
  </script>
</body><body>
  <script src=/resources/testharness.js></script>
  <script src=/resources/testharnessreport.js></script>
  <script src=/common/utils.js></script>
  <script src=/fenced-frame/resources/utils.js></script>
  <script src=/shared-storage/resources/util.js></script>
  <script src=/shared-storage/resources/util.sub.js></script>
  <script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]> via JS for cross origin img');
  </script>
</body><script><script><script><script><script><script><body><script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]> via JS for cross origin img');
  </script></script></script></script></script><script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]> via JS for cross origin img');
  </script><script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]> via JS for cross origin img');
  </script><script><script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]> via JS for cross origin img');
  </script>
    const sameOrigin = new URL("", location.href).origin;
    const crossOrigin = 'https://{{domains[www]}}:{{ports[https][-1]}}';

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'f', value: 'g',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: true,
      });

      await verifyKeyNotFoundForOrigin('f', sameOrigin);
    }, 'test <img src=[url]> via JS for same origin img');

    promise_test(async t => {
      await loadSharedStorageImage({
        key: 'h', value: 'i',
        hasSharedStorageWritableAttribute: false,
        isSameOrigin: false,
      });

      await verifyKeyNotFoundForOrigin('h', crossOrigin);
    }, 'test <img src=[url]<body>> via JS for cross origin img');
  </script></script></script>
