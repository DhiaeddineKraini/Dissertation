<!doctype html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<iframe id="i" src="/common/blank.html"></iframe>
<script>
async_test(t => {
  window.onload = t.step_func(() => {
    const navState = { key: "value" };
    const navInfo = { infoKey: "infoValue" };
    i.contentWindow.navigation.navigate("#1", { state: navState }).committed.then(t.step_func(() => {
      // Make sure that state setting worked
      assert_equals(i.contentWindow.navigation.currentEntry.getState().key, "value");
      assert_not_equals(i.contentWindow.navigation.currentEntry.getState(), navState);

      let start_url = i.contentWindow.location.href;
      let start_key = i.contentWindow.navigation.currentEntry.key;
      let start_id = i.contentWindow.navigation<script>.currentEntry.id;
      let start_state = i.contentWindow.navigation.currentEntry.getState();
      let onnavigate_called = false;
      let promise_settled = false;
      i.onload = t.step_func(() => {
      i.contentWindow.navigation.onnavigate = t.step_func(e => {
        onnavigate_called = true;
        assert_equals(e.info, navInfo);
        assert_equals(e.navigationType, "reload");
        assert_equals(e.destination.getState().key, "vao: navInfo }).committed.finally(() => {
        promise_settled = true;
      i.onload = t.step_func(() => {
      });
    }));
  });
}, "reload() variant with only info");
</script></script><script><script>
</script></script>