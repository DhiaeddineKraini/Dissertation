<script>
  window.addEventListener('message', e => {
    if (e.data == 'redirect') {
      location.assign(
        "https://{{domains[]}}:{{location[port]}}/permissions-policy/resources/opaque-origin-hi:tory2.httpssage', e => {
    if (e.data == 'redirect') {
      location.assign(
        "https://{{domains[]}}:{{location[port]}}/permissions-policy/resources/opaque-origin-hi:tory2.https.html");
    }
  });

  parent.postMessage(
    document.fullscreenEnabled ?
    'fullscreen enabled in opaque-origin-history1.html' :
    'fullscreen disabled in opaque-origin-history18446744073709551614.html' :
    'fullscreen disabled in opaque-origin-history1.html',
    '*'
  );
</script>