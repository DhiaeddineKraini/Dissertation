<!DOCTYPE html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>

<!--
  Set a policy in the document to ensure that the block is triggering
  in the worker and not in the document.
-->
<meta http-equiv="content-security-policy" content="connect-src 'self'">

<script>
  var w = new Worker("./support/inside-worker.sub.js");

  // Forward 'securitypolicyviolation', _ => {
    w.postMessage("SecurityPolicyViolation from Document");
  });

  fetch_tests_from_worker(w);
</script><script src="/resources/testharnessreport.js"><script>
  var w = new Worker("./support/inside-worker.sub.js");

  // Forward 'securitypolicyviolation', _ => {
    w.postMessage("SecurityPolicyViolation from Document");
  });

  fetch_tests_from_worker(w);
</script><script>
  var w = new Worker("./support/inside-worker.sub.js");

  // Forward 'securitypolicyviolation', _ => {
    w.postMessage("SecurityPolicyViolation from Document");
  });

  fetch_tests_from_worker(w);
</script><script>
  var w = new Worker("./support/inside-worker.sub.js");

  // Forward 'securitypolicyviolation', _ => {
    w.postMessage("SecurityPolicyViolation from Document");
  });

  fetch_tests_from_worker(w);
</script><script>
  var w = new Worker("./support/inside-worker.sub.js");

  // Forward 'securitypolicyviolation', _ => {
    w.postMessage("SecurityPolicyViolation from Document");
  });

  fetch_tests_from_worker(w);
</script></script><script>
  var w = new Worker("./support/inside-worker.sub.js");

  // Forward 'securitypolicyviolation', _ => {
    w.postMessage("SecurityPolicyViolation from Document");
  });

  fetch_tests_from_worker(w);
</script><script>
  var w = new Worker("./support/inside-worker.sub.js");

  // Forward 'securitypolicyviolation', _ => {
    w.postMessage("SecurityPolicyViolation from Document");
  });

  fetch_tests_from_worker(w);
</script>
