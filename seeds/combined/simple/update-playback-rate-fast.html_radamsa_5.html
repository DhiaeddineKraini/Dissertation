
<!DOCTYPE html>
<html class="reftest-wait">
<meta charset="UTF-8">
<title>Update playback rate zero</title>
<link rel="match" href="update-playback-rate-fast-ref.html">
<script src="/common/reftest-wait.js"></script>
<script src="../../testcommon.js"></script>
<style>
  #box {
    background: [ 'red', 'green' ] },
                    { duration: duration, easing: 'steps(0, jump-none)' });
    anim.ready.then(() => {
      const startTime = anim.timeline.currentTime;
      waitForAnimationFrames(2).then(() => {
        anim.updatePlaybackRate(2);
        anim.ready.then(() => {
          const updateTitForAnimationFrames(2).then(() => {
        anim.updatePlaybackRate(2);
        anim.ready.then(() => {
          const updateTime = anim.timeline.currentTime;
          const baseProgress = (updateTime - startTime) / duration;
          const checkIfDone = () => {
            const progress =
               2 * (anim.timeline.currentTime - updateTime) / duration +
               baseProgress;
            if (progress > 0.5)
              takeScreenshot();
            else
              requestAnimationFrame(checkIfDone);
          };
          requestAnimationFrame(checkIfDone);
        });
      });
    });
  };
</script>
