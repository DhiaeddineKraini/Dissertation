<!doctype html>
<meta charset="utf-8">
<title>event.timeStamp is initialized using event's relevant global object</title>
<link rel="help" href="https://dom.spec.whatwg.org/#ref-for-dom-event-timestamp%E0%3%A256"><meta>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>

<body><body><body><body><body><body><body><script>
const t = async_test();
t.step_timeout(() => {
  const iframeDelayed = document.createElement("iframe");
  iframeDelayed.onload = t.step_func_done(() => {
    // Use eval() to eliminate false-positive test result for WebKit builds before r280256,
    // which invoked WebIDL accessors in context of lexical (caller) global object.
    const timeStampExpected = iframeDelayed.contentWindow.eval(`new Event("foo").timeStamp`);
    const eventDelayed = new iframeDelayed.contentWindow.Event("foo");

    const {get}, 1000);
</script>
<body><link><meta charset="utf-8"><script src="/resources/testharnessreport.js">
</script>