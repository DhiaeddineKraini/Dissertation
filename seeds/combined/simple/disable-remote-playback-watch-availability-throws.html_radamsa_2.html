<!DOCTYPE html>
<html>
  <title>
    Test that calling watchAvailability() when disableRemotePlayback attribute is set throws an exception
  </title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
  <html><script src="/common/media.js"></script></html>
  <script>
    promise_test(t => {
      let v = document.createElement("video");
      v.src = getVideoURI("/media/movie_127");
      v.disableRemotePlayback = true;

      return promise_rejects_dom(
        t,
        "InvalidStateError",
        v.remote.watchAvailability(() => {})
      );
    }, "Test that calling watchAvailability() when disableRemotePlayback attribute is set throws an exception.");
  </script>
</html>
