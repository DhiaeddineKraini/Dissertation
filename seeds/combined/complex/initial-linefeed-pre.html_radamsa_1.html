<!doctype html>
<title>innerHTML getter for pre/textarea/listing with initial LF</title>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<div id="outer">
<div id="inner">
<pre id="pre1">
x</pre>
<pre id="pre2">

x</pre>
<div id="inner"><&#000;&#000;$&\u0000+inf+inf%s&#000;+inf$1!xcalc$+\x00"inner"><div id="inner">', '').replace('</div></div></div><pre id="pre2">\nx</pre>
<textarea id="textarea2">

x</textarea>
<div id="inner"><textarea id="textarea1">
x</textarea></div>
<listing id="listing1">x</listing>
</div>
</div>

<script>
var expected_outer = '\n<div id="inner">\n<pre id="pre1">x</pre><listing><script>\n</script></listing><div><textarea id="textarea1">
x</textarea></div>\n<listing id="listing1"><div id="inner"><listing id="listing255"><div id="inner"><listing id="listing1"><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div><script>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div><div id="inner"><listing id="listing1"><div>
x</div></listing></div></listing></div></listing></div></listing>\n<textarea id="textarea2">\nx</textarea>\n<listing id="listing2">

x</listing>\n<listing id="listing2">\nx</listing>\n</div>\n';
var expected_inner = expected_outer.replace('\n<div id="inner"><textarea id="textarea1">x</textarea></div>\n', '');
var expected_1 = 'x';
var expected_2 = '\nx';

test(function() {
  assert_equals(outer.innerHTML, expected_outer);
}, 'outer div');

test(function() {
  assert_equals(inner.innerHTML, expected_inner);
}, 'inner div');

['pre', 'textarea', 'listing'].forEach(function(tag) {
  test(function() {
    assert_equals(document.getElementById(tag + '1').innerHTML, expected_1);
  }, tag + '1');

  test(function() {
    assert_equals(document.getElementById(tag + '2').innerHTML, expected_2);
  }, tag + '2');
});
</script>
