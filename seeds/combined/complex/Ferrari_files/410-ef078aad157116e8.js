(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{4733:function(e,t,n){"use strict";var o=n(7653),r=n(3182),i=n.n(r),s=n(6050),a=n.n(s);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=["catalogSearch","catalogSequence"],d=["adConfigId","applicationId","catalogSearch","catalogSequence","playlistId","playlistVideoId","videoId"],p=function(e,t){if(e&&void 0!==e[t]){if("string"!=typeof e[t]&&-1!==u.indexOf(t))try{return encodeURIComponent(JSON.stringify(e[t]))}catch(e){return}return encodeURIComponent(String(e[t]).trim())||void 0}},g=function(e){var t=e.accountId,n=e.base,o=void 0===n?"https://players.brightcove.net":n,r=e.playerId,i=void 0===r?"default":r,s=e.embedId,a=void 0===s?"default":s,c=e.iframe,l=void 0!==c&&c,u=e.minified,g=e.queryParams,f=void 0===g?null:g,_="";l?_+="html":((void 0===u||u)&&(_+="min."),_+="js"),"/"===o.charAt(o.length-1)&&(o=o.substring(0,o.length-1));var m="";return l&&f&&(void 0===f?"undefined":h(f))==="object"&&(m=Object.keys(f).filter(function(e){return -1!==d.indexOf(e)}).reduce(function(e,t){var n=p(f,t);return void 0!==n&&(e+=(e?"&":"?")+encodeURIComponent(t)+"="+n),e},"")),o+"/"+(t=encodeURIComponent(t))+"/"+(i=encodeURIComponent(i))+"_"+(a=encodeURIComponent(a))+"/index."+_+m};g.VERSION="1.2.0";var f={embedId:"default",embedType:"in-page",playerId:"default",Promise:a().Promise,refNodeInsert:"append"},_="video",m="video-js",y="in-page",v="iframe",b="append",w="prepend",S="before",C="after",E="replace",I=["catalogSearch","catalogSequence"],k="https://players.brightcove.net/",P={getUrl:function(e){if(e.playerUrl)return e.playerUrl;var t=e.accountId,n=e.playerId,o=e.embedId,r=e.embedOptions;return g({accountId:t,playerId:n,embedId:o,iframe:e.embedType===v,base:k,minified:!r||!r.unminified,queryParams:e})},getBaseUrl:function(){return k},setBaseUrl:function(e){k=e}},T=function(e){return!!(e&&1===e.nodeType)},R=function(e){return!!(T(e)&&e.parentNode)},M=function(e){var t=i().createElement("iframe");return t.setAttribute("allow","autoplay;encrypted-media;fullscreen"),t.setAttribute("allowfullscreen","allowfullscreen"),t.src=P.getUrl(e),t},x=function(e){var t=e.embedOptions,n={adConfigId:"data-ad-config-id",applicationId:"data-application-id",catalogSearch:"data-catalog-search",catalogSequence:"data-catalog-sequence",deliveryConfigId:"data-delivery-config-id",playlistId:"data-playlist-id",playlistVideoId:"data-playlist-video-id",poster:"poster",videoId:"data-video-id"},o=t&&t.tagName||m,r=i().createElement(o);return Object.keys(n).filter(function(t){return e[t]}).forEach(function(t){var o;if("string"!=typeof e[t]&&-1!==I.indexOf(t))try{o=JSON.stringify(e[t])}catch(e){return}else o=String(e[t]).trim();r.setAttribute(n[t],o)}),r.setAttribute("controls","controls"),r.classList.add("video-js"),r},$=function(e,t,n){if(!t.responsive)return n;n.style.position="absolute",n.style.top="0px",n.style.right="0px",n.style.bottom="0px",n.style.left="0px",n.style.width="100%",n.style.height="100%";var o=l({aspectRatio:"16:9",iframeHorizontalPlaylist:!1,maxWidth:"100%"},t.responsive),r=o.aspectRatio.split(":").map(Number),s=i().createElement("div"),a=r[1]/r[0]*100;e===v&&o.iframeHorizontalPlaylist&&(a*=1.25),s.style.paddingTop=a+"%",s.appendChild(n);var c=i().createElement("div");return c.style.position="relative",c.style.display="block",c.style.maxWidth=o.maxWidth,c.appendChild(s),c},D=function(e,t){if(!e.pip)return t;var n=i().createElement("div");return n.classList.add("vjs-pip-container"),n.appendChild(t),n},O=function(e,t){var n,o,r=e.refNode,s=e.refNodeInsert,a=r.parentNode,c=(n=e.embedType,(o=e.embedOptions)?D(o,$(n,o,t)):t);if(s===S?a.insertBefore(c,r):s===C?a.insertBefore(c,r.nextElementSibling||null):s===E?a.replaceChild(c,r):s===w?r.insertBefore(c,r.firstChild||null):r.appendChild(c),e.embedOptions&&e.embedOptions.playlist){var l=e.embedOptions.playlist.legacy?"ul":"div",h=i().createElement(l);h.classList.add("vjs-playlist"),t.parentNode.insertBefore(h,t.nextElementSibling||null)}return e.refNode=null,t},N=function(e,t){if("function"!=typeof e.onEmbedCreated)return t;var n=e.onEmbedCreated(t);return T(n)?n:t},j=function(e){var t=e.embedType===v?M(e):x(e);return O(e,N(e,t))},A=new(a()).Map,q=function(e){return(e.accountId||"*")+"_"+e.playerId+"_"+e.embedId},B={clear:function(){A.clear()},forEach:function(e){A.forEach(e)},has:function(e){return A.has(q(e))},store:function(e){A.set(q(e),e.accountId?P.getUrl(e):"")}},L=/^([A-Za-z0-9]+)_([A-Za-z0-9]+)$/,H=function(){return a().bc?Object.keys(a().bc).filter(function(e){return L.test(e)}):[]},U=function(e){e&&Object.keys(e.players).forEach(function(t){var n=e.players[t];n&&n.dispose()})},W=function(){B.forEach(function(e,t){e&&Array.prototype.slice.call(i().querySelectorAll('script[src="'+e+'"]')).forEach(function(e){return e.parentNode.removeChild(e)})}),B.clear(),U(a().videojs),H().forEach(function(e){return U(a().bc[e].videojs)}),Object.keys(a()).filter(function(e){return/^videojs/i.test(e)||/^(bc)$/.test(e)}).forEach(function(e){delete a()[e]})};H().forEach(function(e){var t=e.match(L),n={playerId:t[1],embedId:t[2]};B.has(n)||B.store(n)});var F=function(e){return"function"==typeof e},z=function(e){var t,n=e.accountId,o=e.embedOptions,r=e.embedType,i=e.options,s=e.refNode,a=e.refNodeInsert;if(n){if(R(s)){if(r===y||r===v){if(r===v&&i)throw Error("cannot use options with an iframe embed");if(o&&void 0!==o.tagName&&!((t=o.tagName)===m||t===_))throw Error('embedOptions.tagName is invalid (value: "'+o.tagName+'")');if(o&&o.responsive&&o.responsive.aspectRatio&&!/^\d+\:\d+$/.test(o.responsive.aspectRatio))throw Error('embedOptions.responsive.aspectRatio must be in the "n:n" format (value: "'+o.responsive.aspectRatio+'")');if(!(a===b||a===w||a===S||a===C||a===E))throw Error("refNodeInsert is missing or invalid")}else throw Error("embedType is missing or invalid")}else throw Error("refNode must resolve to a node attached to the DOM")}else throw Error("accountId is required")},G=function(e,t,n,o){var r,i=e.embedId,s=e.playerId,c=a().bc[s+"_"+i]||a().bc;if(!c)return o(Error("missing bc function for "+s));B.store(e);try{(r=c(t,e.options)).bcinfo&&(r.bcinfo.PLAYER_LOADER=!0)}catch(t){var l="Could not initialize the Brightcove Player.";return e.embedOptions.tagName===m&&(l+=' You are attempting to embed using a "video-js" element. Please ensure that your Player is v6.11.0 or newer in order to support this embed type. Alternatively, pass `"video"` for `embedOptions.tagName`.'),o(Error(l))}n({type:y,ref:r})},V=function(e,t,n){e.refNode=R(o=e.refNode)?o:"string"==typeof o?i().querySelector(o):null,z(e);var o,r=e.refNode,s=e.refNodeInsert,a=r.parentNode,c=j(e);if(e.embedType===v){t({type:v,ref:c});return}if(B.has(e))return G(e,c,t,n);var l=i().createElement("script");l.onload=function(){return G(e,c,t,n)},l.onerror=function(){n(Error("player script could not be downloaded"))},l.async=!0,l.charset="utf-8",l.src=P.getUrl(e),s===E?a.appendChild(l):r.appendChild(l)},J=function(e){var t=l({},f,e),n=t.Promise,o=t.onSuccess,r=t.onFailure;return!F(n)||F(o)||F(r)?V(t,F(o)?o:function(){},F(r)?r:function(e){throw e}):new n(function(e,n){return V(t,e,n)})},X=function(e,t){Object.defineProperty(J,e,{configurable:!1,enumerable:!0,value:t,writable:!1})};X("getBaseUrl",function(){return P.getBaseUrl()}),X("setBaseUrl",function(e){P.setBaseUrl(e)}),X("getUrl",function(e){return P.getUrl(e)}),X("reset",function(){return W()}),[["EMBED_TAG_NAME_VIDEO",_],["EMBED_TAG_NAME_VIDEOJS",m],["EMBED_TYPE_IN_PAGE",y],["EMBED_TYPE_IFRAME",v],["REF_NODE_INSERT_APPEND",b],["REF_NODE_INSERT_PREPEND",w],["REF_NODE_INSERT_BEFORE",S],["REF_NODE_INSERT_AFTER",C],["REF_NODE_INSERT_REPLACE",E],["VERSION","1.8.0"]].forEach(function(e){X(e[0],e[1])});var K=["catalogSearch","catalogSequence","playlistId","playlistVideoId","videoId"],Y=function(e){e&&console&&console.error&&console.error(e)},Q=function(e){function t(t){var n;return(n=e.call(this,t)||this).refNode=null,n.setRefNode=function(e){n.refNode=e},n.loadPlayer=n.loadPlayer.bind(function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var n=t.prototype;return n.loadPlayer=function(){var e=this;if(this.loading_){console.log("Brightcove React Player Loader aborted a subsequent player load while a load was pending");return}this.loading_=!0,this.disposePlayer();var t=this.props.onSuccess,n=this.props.onFailure,o=c({},this.props,{refNode:this.refNode,refNodeInsert:"append",onSuccess:function(n){var o=n.ref,r=n.type;if(e.loading_=!1,!e.isMounted_){e.disposePlayer(o);return}e.player=o,"in-page"===r&&o.one("dispose",function(){e.player=null}),o.bcinfo&&(o.bcinfo.REACT_PLAYER_LOADER=!0),"function"==typeof t&&t({ref:o,type:r})},onFailure:function(t){if(e.loading_=!1,e.isMounted_){if("function"==typeof n){n(t);return}throw Error(t)}}});delete o.attrs,delete o.baseUrl,delete o.manualReloadFromPropChanges;var r=J.getBaseUrl();this.props.baseUrl&&J.setBaseUrl(this.props.baseUrl),J(o),J.setBaseUrl(r)},n.disposePlayer=function(){this.player&&(this.player.dispose?this.player.dispose():this.player.parentNode&&this.player.parentNode.removeChild(this.player),this.player=null)},n.findPlaylistVideoIdIndex_=function(e){var t=this.props.playlistVideoId;if(Array.isArray(e)&&t)for(var n=0;n<e.length;n++){var o=e[n],r=o.id,i=o.referenceId;if(r===t||"ref:"+i===t)return n}return -1},n.createPlaybackAPICallback_=function(e,t){var n=this;return function(o,r){if(o){Y(o);return}if("playlist"===e&&t.playlistVideoId){var i=n.findPlaylistVideoIdIndex_(r);i>-1&&(r.startingIndex=i)}n.player.catalog.load(r)}},n.updatePlayer=function(e){if(this.player&&this.player.el&&this.player.el()){if(this.player.usingPlugin("catalog")){if(e.catalogSequence&&this.props.catalogSequence){var t,n=this.createPlaybackAPICallback_("sequence",e);this.player.catalog.getLazySequence(this.props.catalogSequence,n,this.props.adConfigId);return}e.videoId&&this.props.videoId?t={type:"video",id:this.props.videoId}:e.playlistId&&this.props.playlistId?t={type:"playlist",id:this.props.playlistId}:e.catalogSearch&&this.props.catalogSearch&&(t={type:"search",q:this.props.catalogSearch})}if(t){this.props.adConfigId&&(t.adConfigId=this.props.adConfigId),this.props.deliveryConfigId&&(t.deliveryConfigId=this.props.deliveryConfigId);var o=this.createPlaybackAPICallback_(t.type,e);this.player.catalog.get(t,o)}else if(e.playlistVideoId&&this.props.playlistVideoId&&this.player.usingPlugin("playlist")){var r=this.findPlaylistVideoIdIndex_(this.player.playlist());r>-1&&this.player.playlist.currentItem(r)}}},n.componentDidMount=function(){this.isMounted_=!0,this.loadPlayer()},n.componentDidUpdate=function(e){var t=this,n=Object.keys(e).reduce(function(n,o){var r=e[o],i=t.props[o];return"function"==typeof i||("object"==typeof i&&null!==i?JSON.stringify(i)!==JSON.stringify(r)&&(n[o]=!0):i!==r&&(n[o]=!0)),n},{});if(!this.props.manualReloadFromPropChanges&&Object.keys(n).some(function(e){return -1===K.indexOf(e)})){this.loadPlayer();return}this.updatePlayer(n)},n.componentWillUnmount=function(){this.isMounted_=!1,this.disposePlayer()},n.render=function(){var e=c({className:"brightcove-react-player-loader"},this.props.attrs,{ref:this.setRefNode});return o.createElement("div",e)},t}(o.Component);t.Z=Q},7879:function(e,t,n){"use strict";n.d(t,{s:function(){return Z}});let o=[0,2e3,1e4,3e4,null];class r{constructor(e){this._retryDelays=void 0!==e?[...e,null]:o}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class i{}i.Authorization="Authorization",i.Cookie="Cookie";class s{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}class a{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}class c extends a{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);let n=await this._innerClient.send(e);return t&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[i.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[i.Authorization]&&delete e.headers[i.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}class l extends Error{constructor(e,t){let n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}}class h extends Error{constructor(e="A timeout occurred."){let t=new.target.prototype;super(e),this.__proto__=t}}class u extends Error{constructor(e="An abort occurred."){let t=new.target.prototype;super(e),this.__proto__=t}}class d extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}}class p extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}}class g extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}}class f extends Error{constructor(e){let t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class _ extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}}var m,y,v,b,w=n(3862);class S{constructor(){}log(e,t){}}S.instance=new S;var C=n(8571);class E{static isRequired(e,t){if(null==e)throw Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw Error(`Unknown ${n} value: ${e}.`)}}class I{static get isBrowser(){return!I.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!I.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!I.isNode&&"object"==typeof window&&void 0===window.document}static get isNode(){return void 0!==C&&C.release&&"node"===C.release.name}}function k(e,t){let n="";return P(e)?(n=`Binary data of length ${e.byteLength}`,t&&(n+=`. Content: '${function(e){let t=new Uint8Array(e),n="";return t.forEach(e=>{n+=`0x${e<16?"0":""}${e.toString(16)} `}),n.substr(0,n.length-1)}(e)}'`)):"string"==typeof e&&(n=`String data of length ${e.length}`,t&&(n+=`. Content: '${e}'`)),n}function P(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}async function T(e,t,n,o,r,i){let s={},[a,c]=x();s[a]=c,e.log(w.i.Trace,`(${t} transport) sending data. ${k(r,i.logMessageContent)}.`);let l=P(r)?"arraybuffer":"text",h=await n.post(o,{content:r,headers:{...s,...i.headers},responseType:l,timeout:i.timeout,withCredentials:i.withCredentials});e.log(w.i.Trace,`(${t} transport) request complete. Response status: ${h.statusCode}.`)}class R{constructor(e,t){this._subject=e,this._observer=t}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(e=>{})}}class M{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){let n=`[${new Date().toISOString()}] ${w.i[e]}: ${t}`;switch(e){case w.i.Critical:case w.i.Error:this.out.error(n);break;case w.i.Warning:this.out.warn(n);break;case w.i.Information:this.out.info(n);break;default:this.out.log(n)}}}}function x(){let e="X-SignalR-User-Agent";return I.isNode&&(e="User-Agent"),[e,function(e,t,n,o){let r="Microsoft SignalR/",i=e.split(".");return r+=`${i[0]}.${i[1]} (${e}; `,t&&""!==t?r+=`${t}; `:r+="Unknown OS; ",r+=`${n}`,o?r+=`; ${o}`:r+="; Unknown Runtime Version",r+=")"}("8.0.7",function(){if(!I.isNode)return"";switch(C.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return C.platform}}(),I.isNode?"NodeJS":"Browser",function(){if(I.isNode)return C.versions.node}())]}function $(e){return e.stack?e.stack:e.message?e.message:`${e}`}class D extends a{constructor(e){if(super(),this._logger=e,"undefined"==typeof fetch||I.isNode){let e=require;this._jar=new(e("tough-cookie")).CookieJar,"undefined"==typeof fetch?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw Error("could not find global")}());if("undefined"==typeof AbortController){let e=require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}async send(e){let t,n;if(e.abortSignal&&e.abortSignal.aborted)throw new u;if(!e.method)throw Error("No method defined.");if(!e.url)throw Error("No url defined.");let o=new this._abortControllerType;e.abortSignal&&(e.abortSignal.onabort=()=>{o.abort(),t=new u});let r=null;e.timeout&&(r=setTimeout(()=>{o.abort(),this._logger.log(w.i.Warning,"Timeout from HTTP request."),t=new h},e.timeout)),""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},P(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{n=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:o.signal})}catch(e){if(t)throw t;throw this._logger.log(w.i.Warning,`Error from HTTP request. ${e}.`),e}finally{r&&clearTimeout(r),e.abortSignal&&(e.abortSignal.onabort=null)}if(!n.ok)throw new l(await O(n,"text")||n.statusText,n.status);let i=O(n,e.responseType),a=await i;return new s(n.status,n.statusText,a)}getCookieString(e){let t="";return I.isNode&&this._jar&&this._jar.getCookies(e,(e,n)=>t=n.join("; ")),t}}function O(e,t){let n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw Error(`${t} is not supported.`)}return n}class N extends a{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new u):e.method?e.url?new Promise((t,n)=>{let o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=void 0===e.withCredentials||e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(P(e.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let r=e.headers;r&&Object.keys(r).forEach(e=>{o.setRequestHeader(e,r[e])}),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{o.abort(),n(new u)}),e.timeout&&(o.timeout=e.timeout),o.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?t(new s(o.status,o.statusText,o.response||o.responseText)):n(new l(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(w.i.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),n(new l(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(w.i.Warning,"Timeout from HTTP request."),n(new h)},o.send(e.content)}):Promise.reject(Error("No url defined.")):Promise.reject(Error("No method defined."))}}class j extends a{constructor(e){if(super(),"undefined"!=typeof fetch||I.isNode)this._httpClient=new D(e);else if("undefined"!=typeof XMLHttpRequest)this._httpClient=new N(e);else throw Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new u):e.method?e.url?this._httpClient.send(e):Promise.reject(Error("No url defined.")):Promise.reject(Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}var A=n(6946);class q{constructor(){this._isAborted=!1,this.onabort=null}abort(){!this._isAborted&&(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class B{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new q,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(E.isRequired(e,"url"),E.isRequired(t,"transferFormat"),E.isIn(t,A.k,"transferFormat"),this._url=e,this._logger.log(w.i.Trace,"(LongPolling transport) Connecting."),t===A.k.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof new XMLHttpRequest().responseType)throw Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[n,o]=x(),r={[n]:o,...this._options.headers},i={abortSignal:this._pollAbort.signal,headers:r,timeout:1e5,withCredentials:this._options.withCredentials};t===A.k.Binary&&(i.responseType="arraybuffer");let s=`${e}&_=${Date.now()}`;this._logger.log(w.i.Trace,`(LongPolling transport) polling: ${s}.`);let a=await this._httpClient.get(s,i);200!==a.statusCode?(this._logger.log(w.i.Error,`(LongPolling transport) Unexpected response code: ${a.statusCode}.`),this._closeError=new l(a.statusText||"",a.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _poll(e,t){try{for(;this._running;)try{let n=`${e}&_=${Date.now()}`;this._logger.log(w.i.Trace,`(LongPolling transport) polling: ${n}.`);let o=await this._httpClient.get(n,t);204===o.statusCode?(this._logger.log(w.i.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==o.statusCode?(this._logger.log(w.i.Error,`(LongPolling transport) Unexpected response code: ${o.statusCode}.`),this._closeError=new l(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(w.i.Trace,`(LongPolling transport) data received. ${k(o.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(o.content)):this._logger.log(w.i.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(e){this._running?e instanceof h?this._logger.log(w.i.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=e,this._running=!1):this._logger.log(w.i.Trace,`(LongPolling transport) Poll errored after shutdown: ${e.message}`)}}finally{this._logger.log(w.i.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?T(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(w.i.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{let e;await this._receiving,this._logger.log(w.i.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let t={},[n,o]=x();t[n]=o;let r={headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};try{await this._httpClient.delete(this._url,r)}catch(t){e=t}e?e instanceof l&&(404===e.statusCode?this._logger.log(w.i.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(w.i.Trace,`(LongPolling transport) Error sending a DELETE request: ${e}`)):this._logger.log(w.i.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(w.i.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(w.i.Trace,e),this.onclose(this._closeError)}}}class L{constructor(e,t,n,o){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=o,this.onreceive=null,this.onclose=null}async connect(e,t){return E.isRequired(e,"url"),E.isRequired(t,"transferFormat"),E.isIn(t,A.k,"transferFormat"),this._logger.log(w.i.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(0>e.indexOf("?")?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,o)=>{let r,i=!1;if(t!==A.k.Text){o(Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}if(I.isBrowser||I.isWebWorker)r=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let t=this._httpClient.getCookieString(e),n={};n.Cookie=t;let[o,i]=x();n[o]=i,r=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...n,...this._options.headers}})}try{r.onmessage=e=>{if(this.onreceive)try{this._logger.log(w.i.Trace,`(SSE transport) data received. ${k(e.data,this._options.logMessageContent)}.`),this.onreceive(e.data)}catch(e){this._close(e);return}},r.onerror=e=>{i?this._close():o(Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},r.onopen=()=>{this._logger.log(w.i.Information,`SSE connected to ${this._url}`),this._eventSource=r,i=!0,n()}}catch(e){o(e);return}})}async send(e){return this._eventSource?T(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class H{constructor(e,t,n,o,r,i){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=o,this._webSocketConstructor=r,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=i}async connect(e,t){let n;return E.isRequired(e,"url"),E.isRequired(t,"transferFormat"),E.isIn(t,A.k,"transferFormat"),this._logger.log(w.i.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise((o,r)=>{let s;e=e.replace(/^http/,"ws");let a=this._httpClient.getCookieString(e),c=!1;if(I.isNode||I.isReactNative){let t={},[o,r]=x();t[o]=r,n&&(t[i.Authorization]=`Bearer ${n}`),a&&(t[i.Cookie]=a),s=new this._webSocketConstructor(e,void 0,{headers:{...t,...this._headers}})}else n&&(e+=(0>e.indexOf("?")?"?":"&")+`access_token=${encodeURIComponent(n)}`);s||(s=new this._webSocketConstructor(e)),t===A.k.Binary&&(s.binaryType="arraybuffer"),s.onopen=t=>{this._logger.log(w.i.Information,`WebSocket connected to ${e}.`),this._webSocket=s,c=!0,o()},s.onerror=e=>{let t=null;"undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?t=e.error:t="There was an error with the transport",this._logger.log(w.i.Information,`(WebSockets transport) ${t}.`)},s.onmessage=e=>{if(this._logger.log(w.i.Trace,`(WebSockets transport) data received. ${k(e.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(e.data)}catch(e){this._close(e);return}},s.onclose=e=>{if(c)this._close(e);else{let t=null;"undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?t=e.error:t="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",r(Error(t))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(w.i.Trace,`(WebSockets transport) sending data. ${k(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(w.i.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(!1===e.wasClean||1e3!==e.code)?this.onclose(Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&"boolean"==typeof e.wasClean&&"number"==typeof e.code}}class U{constructor(e,t={}){var n;if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,E.isRequired(e,"url"),this._logger=void 0===(n=t.logger)?new M(w.i.Information):null===n?S.instance:void 0!==n.log?n:new M(n),this.baseUrl=this._resolveUrl(e),(t=t||{}).logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"==typeof t.withCredentials||void 0===t.withCredentials)t.withCredentials=void 0===t.withCredentials||t.withCredentials;else throw Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=void 0===t.timeout?1e5:t.timeout;let o=null,r=null;if(I.isNode){let e=require;o=e("ws"),r=e("eventsource")}I.isNode||"undefined"==typeof WebSocket||t.WebSocket?I.isNode&&!t.WebSocket&&o&&(t.WebSocket=o):t.WebSocket=WebSocket,I.isNode||"undefined"==typeof EventSource||t.EventSource?I.isNode&&!t.EventSource&&void 0!==r&&(t.EventSource=r):t.EventSource=EventSource,this._httpClient=new c(t.httpClient||new j(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||A.k.Binary,E.isIn(e,A.k,"transferFormat"),this._logger.log(w.i.Debug,`Starting connection with transfer format '${A.k[e]}'.`),"Disconnected"!==this._connectionState)return Promise.reject(Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,"Disconnecting"===this._connectionState){let e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(w.i.Error,e),await this._stopPromise,Promise.reject(new u(e))}if("Connected"!==this._connectionState){let e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(w.i.Error,e),Promise.reject(new u(e))}this._connectionStarted=!0}send(e){return"Connected"!==this._connectionState?Promise.reject(Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new W(this.transport)),this._sendQueue.send(e))}async stop(e){return"Disconnected"===this._connectionState?(this._logger.log(w.i.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(w.i.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):void(this._connectionState="Disconnecting",this._stopPromise=new Promise(e=>{this._stopPromiseResolver=e}),await this._stopInternal(e),await this._stopPromise)}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch(e){}if(this.transport){try{await this.transport.stop()}catch(e){this._logger.log(w.i.Error,`HttpConnection.transport.stop() threw error '${e}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(w.i.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport===A.n.WebSockets)this.transport=this._constructTransport(A.n.WebSockets),await this._startTransport(t,e);else throw Error("Negotiation can only be skipped when using the WebSocket transport directly.")}else{let n=null,o=0;do{if(n=await this._getNegotiationResponse(t),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new u("The connection was stopped during negotiation.");if(n.error)throw Error(n.error);if(n.ProtocolVersion)throw Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){let e=n.accessToken;this._accessTokenFactory=()=>e,this._httpClient._accessToken=e,this._httpClient._accessTokenFactory=void 0}o++}while(n.url&&o<100);if(100===o&&n.url)throw Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,n,e)}this.transport instanceof B&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(w.i.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(e){return this._logger.log(w.i.Error,"Failed to start the connection: "+e),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(e)}}async _getNegotiationResponse(e){let t={},[n,o]=x();t[n]=o;let r=this._resolveNegotiateUrl(e);this._logger.log(w.i.Debug,`Sending negotiation request: ${r}.`);try{let e=await this._httpClient.post(r,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==e.statusCode)return Promise.reject(Error(`Unexpected status code returned from negotiate '${e.statusCode}'`));let n=JSON.parse(e.content);if((!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n.useStatefulReconnect&&!0!==this._options._useStatefulReconnect)return Promise.reject(new f("Client didn't negotiate Stateful Reconnect but the server did."));return n}catch(t){let e="Failed to complete negotiation with the server: "+t;return t instanceof l&&404===t.statusCode&&(e+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(w.i.Error,e),Promise.reject(new f(e))}}_createConnectUrl(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+`id=${t}`:e}async _createTransport(e,t,n,o){let r=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t)){this._logger.log(w.i.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(r,o),this.connectionId=n.connectionId;return}let i=[],s=n.availableTransports||[],a=n;for(let n of s){let s=this._resolveTransportOrError(n,t,o,(null==a?void 0:a.useStatefulReconnect)===!0);if(s instanceof Error)i.push(`${n.transport} failed:`),i.push(s);else if(this._isITransport(s)){if(this.transport=s,!a){try{a=await this._getNegotiationResponse(e)}catch(e){return Promise.reject(e)}r=this._createConnectUrl(e,a.connectionToken)}try{await this._startTransport(r,o),this.connectionId=a.connectionId;return}catch(e){if(this._logger.log(w.i.Error,`Failed to start the transport '${n.transport}': ${e}`),a=void 0,i.push(new g(`${n.transport} failed: ${e}`,A.n[n.transport])),"Connecting"!==this._connectionState){let e="Failed to select transport before stop() was called.";return this._logger.log(w.i.Debug,e),Promise.reject(new u(e))}}}}return i.length>0?Promise.reject(new _(`Unable to connect to the server with any of the available transports. ${i.join(" ")}`,i)):Promise.reject(Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case A.n.WebSockets:if(!this._options.WebSocket)throw Error("'WebSocket' is not supported in your environment.");return new H(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case A.n.ServerSentEvents:if(!this._options.EventSource)throw Error("'EventSource' is not supported in your environment.");return new L(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case A.n.LongPolling:return new B(this._httpClient,this._logger,this._options);default:throw Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let o=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{o=!0}else{this._stopConnection(n);return}o&&this._stopConnection(n)}:this.transport.onclose=e=>this._stopConnection(e),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,o){let r=A.n[e.transport];if(null==r)return this._logger.log(w.i.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(t&&(r&t)==0)return this._logger.log(w.i.Debug,`Skipping transport '${A.n[r]}' because it was disabled by the client.`),new p(`'${A.n[r]}' is disabled by the client.`,r);if(!(e.transferFormats.map(e=>A.k[e]).indexOf(n)>=0))return this._logger.log(w.i.Debug,`Skipping transport '${A.n[r]}' because it does not support the requested transfer format '${A.k[n]}'.`),Error(`'${A.n[r]}' does not support ${A.k[n]}.`);if(r===A.n.WebSockets&&!this._options.WebSocket||r===A.n.ServerSentEvents&&!this._options.EventSource)return this._logger.log(w.i.Debug,`Skipping transport '${A.n[r]}' because it is not supported in your environment.'`),new d(`'${A.n[r]}' is not supported in your environment.`,r);this._logger.log(w.i.Debug,`Selecting transport '${A.n[r]}'.`);try{return this.features.reconnect=r===A.n.WebSockets?o:void 0,this._constructTransport(r)}catch(e){return e}}_isITransport(e){return e&&"object"==typeof e&&"connect"in e}_stopConnection(e){if(this._logger.log(w.i.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"===this._connectionState){this._logger.log(w.i.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if("Connecting"===this._connectionState)throw this._logger.log(w.i.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(w.i.Error,`Connection disconnected with error '${e}'.`):this._logger.log(w.i.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(e=>{this._logger.log(w.i.Error,`TransportSendQueue.stop() threw error '${e}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(w.i.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!I.isBrowser)throw Error(`Cannot resolve '${e}'.`);let t=window.document.createElement("a");return t.href=e,this._logger.log(w.i.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){let t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";let n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?"true"===n.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}}class W{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new F,this._transportResult=new F,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new F),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new F;let e=this._transportResult;this._transportResult=void 0;let t="string"==typeof this._buffer[0]?this._buffer.join(""):W._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(t){e.reject(t)}}}static _concatBuffers(e){let t=new Uint8Array(e.map(e=>e.byteLength).reduce((e,t)=>e+t)),n=0;for(let o of e)t.set(new Uint8Array(o),n),n+=o.byteLength;return t.buffer}}class F{constructor(){this.promise=new Promise((e,t)=>([this._resolver,this._rejecter]=[e,t]))}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class z{static write(e){return`${e}${z.RecordSeparator}`}static parse(e){if(e[e.length-1]!==z.RecordSeparator)throw Error("Message is incomplete.");let t=e.split(z.RecordSeparator);return t.pop(),t}}z.RecordSeparatorCode=30,z.RecordSeparator=String.fromCharCode(z.RecordSeparatorCode);class G{writeHandshakeRequest(e){return z.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(P(e)){let o=new Uint8Array(e),r=o.indexOf(z.RecordSeparatorCode);if(-1===r)throw Error("Message is incomplete.");let i=r+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(o.slice(0,i))),n=o.byteLength>i?o.slice(i).buffer:null}else{let o=e.indexOf(z.RecordSeparator);if(-1===o)throw Error("Message is incomplete.");let r=o+1;t=e.substring(0,r),n=e.length>r?e.substring(r):null}let o=JSON.parse(z.parse(t)[0]);if(o.type)throw Error("Expected a handshake response from the server.");return[n,o]}}(m=v||(v={}))[m.Invocation=1]="Invocation",m[m.StreamItem=2]="StreamItem",m[m.Completion=3]="Completion",m[m.StreamInvocation=4]="StreamInvocation",m[m.CancelInvocation=5]="CancelInvocation",m[m.Ping=6]="Ping",m[m.Close=7]="Close",m[m.Ack=8]="Ack",m[m.Sequence=9]="Sequence";class V{constructor(){this.observers=[]}next(e){for(let t of this.observers)t.next(e)}error(e){for(let t of this.observers)t.error&&t.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new R(this,e)}}class J{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}async _send(e){let t=this._protocol.writeMessage(e),n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let e=()=>{},o=()=>{};P(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((t,n)=>{e=t,o=n})),this._messages.push(new X(t,this._totalMessageCount,e,o))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await n}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){let o=this._messages[n];if(o._id<=e.sequenceId)t=n,P(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else if(this._bufferedByteCount<this._bufferSize)o._resolver();else break}-1!==t&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type===v.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;let t=this._nextReceivingSequenceId;return(this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId)?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){let e=0!==this._messages.length?this._messages[0]._id:this._totalMessageCount+1;for(let t of(await this._connection.send(this._protocol.writeMessage({type:v.Sequence,sequenceId:e})),this._messages))await this._connection.send(t._message);this._reconnectInProgress=!1}_dispose(e){for(let t of(null!=e||(e=Error("Unable to reconnect to server.")),this._messages))t._rejector(e)}_isInvocationMessage(e){switch(e.type){case v.Invocation:case v.StreamItem:case v.Completion:case v.StreamInvocation:case v.CancelInvocation:return!0;case v.Close:case v.Sequence:case v.Ping:case v.Ack:return!1}}_ackTimer(){void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:v.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class X{constructor(e,t,n,o){this._message=e,this._id=t,this._resolver=n,this._rejector=o}}(y=b||(b={})).Disconnected="Disconnected",y.Connecting="Connecting",y.Connected="Connected",y.Disconnecting="Disconnecting",y.Reconnecting="Reconnecting";class K{static create(e,t,n,o,r,i,s){return new K(e,t,n,o,r,i,s)}constructor(e,t,n,o,r,i,s){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(w.i.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},E.isRequired(e,"connection"),E.isRequired(t,"logger"),E.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=null!=r?r:3e4,this.keepAliveIntervalInMilliseconds=null!=i?i:15e3,this._statefulReconnectBufferSize=null!=s?s:1e5,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=o,this._handshakeProtocol=new G,this.connection.onreceive=e=>this._processIncomingData(e),this.connection.onclose=e=>this._connectionClosed(e),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=b.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:v.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==b.Disconnected&&this._connectionState!==b.Reconnecting)throw Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==b.Disconnected)return Promise.reject(Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=b.Connecting,this._logger.log(w.i.Debug,"Starting HubConnection.");try{await this._startInternal(),I.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=b.Connected,this._connectionStarted=!0,this._logger.log(w.i.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=b.Disconnected,this._logger.log(w.i.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((e,t)=>{this._handshakeResolver=e,this._handshakeRejecter=t});await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);let n={protocol:this._protocol.name,version:t};if(this._logger.log(w.i.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(w.i.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new J(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(e){throw this._logger.log(w.i.Debug,`Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(e),e}}async stop(){let e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch(e){}}_stopInternal(e){if(this._connectionState===b.Disconnected)return this._logger.log(w.i.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===b.Disconnecting)return this._logger.log(w.i.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let t=this._connectionState;return(this._connectionState=b.Disconnecting,this._logger.log(w.i.Debug,"Stopping HubConnection."),this._reconnectDelayHandle)?(this._logger.log(w.i.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===b.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new u("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){let n;let[o,r]=this._replaceStreamingParams(t),i=this._createStreamInvocation(e,t,r),s=new V;return s.cancelCallback=()=>{let e=this._createCancelInvocation(i.invocationId);return delete this._callbacks[i.invocationId],n.then(()=>this._sendWithProtocol(e))},this._callbacks[i.invocationId]=(e,t)=>{if(t){s.error(t);return}e&&(e.type===v.Completion?e.error?s.error(Error(e.error)):s.complete():s.next(e.item))},n=this._sendWithProtocol(i).catch(e=>{s.error(e),delete this._callbacks[i.invocationId]}),this._launchStreams(o,n),s}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){let[n,o]=this._replaceStreamingParams(t),r=this._sendWithProtocol(this._createInvocation(e,t,!0,o));return this._launchStreams(n,r),r}invoke(e,...t){let[n,o]=this._replaceStreamingParams(t),r=this._createInvocation(e,t,!1,o);return new Promise((e,t)=>{this._callbacks[r.invocationId]=(n,o)=>{if(o){t(o);return}n&&(n.type===v.Completion?n.error?t(Error(n.error)):e(n.result):t(Error(`Unexpected message type: ${n.type}`)))};let o=this._sendWithProtocol(r).catch(e=>{t(e),delete this._callbacks[r.invocationId]});this._launchStreams(n,o)})}on(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();let n=this._methods[e];if(n){if(t){let o=n.indexOf(t);-1!==o&&(n.splice(o,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){for(let t of this._protocol.parseMessages(e,this._logger))if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(t))switch(t.type){case v.Invocation:this._invokeClientMethod(t).catch(e=>{this._logger.log(w.i.Error,`Invoke client method threw error: ${$(e)}`)});break;case v.StreamItem:case v.Completion:{let e=this._callbacks[t.invocationId];if(e){t.type===v.Completion&&delete this._callbacks[t.invocationId];try{e(t)}catch(e){this._logger.log(w.i.Error,`Stream callback threw error: ${$(e)}`)}}break}case v.Ping:break;case v.Close:{this._logger.log(w.i.Information,"Close message received from server.");let e=t.error?Error("Server returned an error on close: "+t.error):void 0;!0===t.allowReconnect?this.connection.stop(e):this._stopPromise=this._stopInternal(e);break}case v.Ack:this._messageBuffer&&this._messageBuffer._ack(t);break;case v.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(t);break;default:this._logger.log(w.i.Warning,`Invalid message type: ${t.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(n){let e="Error parsing handshake response: "+n;this._logger.log(w.i.Error,e);let t=Error(e);throw this._handshakeRejecter(t),t}if(t.error){let e="Server returned handshake error: "+t.error;this._logger.log(w.i.Error,e);let n=Error(e);throw this._handshakeRejecter(n),n}return this._logger.log(w.i.Debug,"Server handshake complete."),this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),void 0===this._pingServerHandle)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===b.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){let t,n,o;let r=e.target.toLowerCase(),i=this._methods[r];if(!i){this._logger.log(w.i.Warning,`No client method with the name '${r}' found.`),e.invocationId&&(this._logger.log(w.i.Warning,`No result given for '${r}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let s=i.slice(),a=!!e.invocationId;for(let i of s)try{let s=t;t=await i.apply(this,e.arguments),a&&t&&s&&(this._logger.log(w.i.Error,`Multiple results provided for '${r}'. Sending error to server.`),o=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),n=void 0}catch(e){n=e,this._logger.log(w.i.Error,`A callback for the method '${r}' threw error '${e}'.`)}o?await this._sendWithProtocol(o):a?(n?o=this._createCompletionMessage(e.invocationId,`${n}`,null):void 0!==t?o=this._createCompletionMessage(e.invocationId,null,t):(this._logger.log(w.i.Warning,`No result given for '${r}' method and invocation ID '${e.invocationId}'.`),o=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(o)):t&&this._logger.log(w.i.Error,`Result given for '${r}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(w.i.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new u("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===b.Disconnecting?this._completeClose(e):this._connectionState===b.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===b.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=b.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(null!=e?e:Error("Connection closed.")),this._messageBuffer=void 0),I.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(w.i.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){let t=Date.now(),n=0,o=void 0!==e?e:Error("Attempting to reconnect due to a unknown error."),r=this._getNextRetryDelay(n++,0,o);if(null===r){this._logger.log(w.i.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=b.Reconnecting,e?this._logger.log(w.i.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(w.i.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(w.i.Error,`An onreconnecting callback called with error '${e}' threw error '${t}'.`)}if(this._connectionState!==b.Reconnecting){this._logger.log(w.i.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;null!==r;){if(this._logger.log(w.i.Information,`Reconnect attempt number ${n} will start in ${r} ms.`),await new Promise(e=>{this._reconnectDelayHandle=setTimeout(e,r)}),this._reconnectDelayHandle=void 0,this._connectionState!==b.Reconnecting){this._logger.log(w.i.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=b.Connected,this._logger.log(w.i.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach(e=>e.apply(this,[this.connection.connectionId]))}catch(e){this._logger.log(w.i.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${e}'.`)}return}catch(e){if(this._logger.log(w.i.Information,`Reconnect attempt failed because of error '${e}'.`),this._connectionState!==b.Reconnecting){this._logger.log(w.i.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===b.Disconnecting&&this._completeClose();return}o=e instanceof Error?e:Error(e.toString()),r=this._getNextRetryDelay(n++,Date.now()-t,o)}}this._logger.log(w.i.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this._logger.log(w.i.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){let t=this._callbacks;this._callbacks={},Object.keys(t).forEach(n=>{let o=t[n];try{o(null,e)}catch(t){this._logger.log(w.i.Error,`Stream 'error' callback called with '${e}' threw error: ${$(t)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,o){if(n)return 0!==o.length?{arguments:t,streamIds:o,target:e,type:v.Invocation}:{arguments:t,target:e,type:v.Invocation};{let n=this._invocationId;return(this._invocationId++,0!==o.length)?{arguments:t,invocationId:n.toString(),streamIds:o,target:e,type:v.Invocation}:{arguments:t,invocationId:n.toString(),target:e,type:v.Invocation}}}_launchStreams(e,t){if(0!==e.length)for(let n in t||(t=Promise.resolve()),e)e[n].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:e=>{let o;o=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,o)))},next:e=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,e)))}})}_replaceStreamingParams(e){let t=[],n=[];for(let o=0;o<e.length;o++){let r=e[o];if(this._isObservable(r)){let i=this._invocationId;this._invocationId++,t[i]=r,n.push(i.toString()),e.splice(o,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&"function"==typeof e.subscribe}_createStreamInvocation(e,t,n){let o=this._invocationId;return(this._invocationId++,0!==n.length)?{arguments:t,invocationId:o.toString(),streamIds:n,target:e,type:v.StreamInvocation}:{arguments:t,invocationId:o.toString(),target:e,type:v.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:v.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:v.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:v.Completion}:{invocationId:e,result:n,type:v.Completion}}_createCloseMessage(){return{type:v.Close}}}class Y{constructor(){this.name="json",this.version=2,this.transferFormat=A.k.Text}parseMessages(e,t){if("string"!=typeof e)throw Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=S.instance);let n=z.parse(e),o=[];for(let e of n){let n=JSON.parse(e);if("number"!=typeof n.type)throw Error("Invalid payload.");switch(n.type){case v.Invocation:this._isInvocationMessage(n);break;case v.StreamItem:this._isStreamItemMessage(n);break;case v.Completion:this._isCompletionMessage(n);break;case v.Ping:case v.Close:break;case v.Ack:this._isAckMessage(n);break;case v.Sequence:this._isSequenceMessage(n);break;default:t.log(w.i.Information,"Unknown message type '"+n.type+"' ignored.");continue}o.push(n)}return o}writeMessage(e){return z.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if("number"!=typeof e.sequenceId)throw Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if("number"!=typeof e.sequenceId)throw Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if("string"!=typeof e||""===e)throw Error(t)}}let Q={trace:w.i.Trace,debug:w.i.Debug,info:w.i.Information,information:w.i.Information,warn:w.i.Warning,warning:w.i.Warning,error:w.i.Error,critical:w.i.Critical,none:w.i.None};class Z{configureLogging(e){if(E.isRequired(e,"logging"),void 0!==e.log)this.logger=e;else if("string"==typeof e){let t=function(e){let t=Q[e.toLowerCase()];if(void 0!==t)return t;throw Error(`Unknown log level: ${e}`)}(e);this.logger=new M(t)}else this.logger=new M(e);return this}withUrl(e,t){return E.isRequired(e,"url"),E.isNotEmpty(e,"url"),this.url=e,"object"==typeof t?this.httpConnectionOptions={...this.httpConnectionOptions,...t}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return E.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new r(e):this.reconnectPolicy=e:this.reconnectPolicy=new r,this}withServerTimeout(e){return E.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return E.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=null==e?void 0:e.bufferSize,this}build(){let e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let t=new U(this.url,e);return K.create(t,this.logger||S.instance,this.protocol||new Y,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}},3862:function(e,t,n){"use strict";var o,r;n.d(t,{i:function(){return o}}),(r=o||(o={}))[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"},6946:function(e,t,n){"use strict";var o,r,i,s;n.d(t,{k:function(){return r},n:function(){return o}}),(i=o||(o={}))[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling",(s=r||(r={}))[s.Text=1]="Text",s[s.Binary=2]="Binary"},3182:function(e,t,n){var o,r=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},i=n(3558);"undefined"!=typeof document?o=document:(o=r["__GLOBAL_DOCUMENT_CACHE@4"])||(o=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o},6050:function(e,t,n){var o;"undefined"!=typeof window?o=window:void 0!==n.g?o=n.g:"undefined"!=typeof self?o=self:o={},e.exports=o},5880:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var o=n(5839),r=n.n(o)},7659:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var o=n(5469),r=n.n(o)},5658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return v}});let o=n(4732),r=n(5622),i=n(7573),s=r._(n(7653)),a=o._(n(3458)),c=o._(n(4830)),l=n(4163),h=n(5135),u=n(9273);n(1673);let d=n(1917),p=o._(n(3804)),g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function f(e,t,n,o,r,i,s){let a=null==e?void 0:e.src;e&&e["data-loaded-src"]!==a&&(e["data-loaded-src"]=a,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&r(!0),null==n?void 0:n.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let o=!1,r=!1;n.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>o,isPropagationStopped:()=>r,persist:()=>{},preventDefault:()=>{o=!0,t.preventDefault()},stopPropagation:()=>{r=!0,t.stopPropagation()}})}(null==o?void 0:o.current)&&o.current(e)}}))}function _(e){return s.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let m=(0,s.forwardRef)((e,t)=>{let{src:n,srcSet:o,sizes:r,height:a,width:c,decoding:l,className:h,style:u,fetchPriority:d,placeholder:p,loading:g,unoptimized:m,fill:y,onLoadRef:v,onLoadingCompleteRef:b,setBlurComplete:w,setShowAltText:S,sizesInput:C,onLoad:E,onError:I,...k}=e;return(0,i.jsx)("img",{...k,..._(d),loading:g,width:c,height:a,decoding:l,"data-nimg":y?"fill":"1",className:h,style:u,sizes:r,srcSet:o,src:n,ref:(0,s.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(I&&(e.src=e.src),e.complete&&f(e,p,v,b,w,m,C))},[n,p,v,b,w,I,m,C,t]),onLoad:e=>{f(e.currentTarget,p,v,b,w,m,C)},onError:e=>{S(!0),"empty"!==p&&w(!0),I&&I(e)}})});function y(e){let{isAppRouter:t,imgAttributes:n}=e,o={as:"image",imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:n.crossOrigin,referrerPolicy:n.referrerPolicy,..._(n.fetchPriority)};return t&&a.default.preload?(a.default.preload(n.src,o),null):(0,i.jsx)(c.default,{children:(0,i.jsx)("link",{rel:"preload",href:n.srcSet?void 0:n.src,...o},"__nimg-"+n.src+n.srcSet+n.sizes)})}let v=(0,s.forwardRef)((e,t)=>{let n=(0,s.useContext)(d.RouterContext),o=(0,s.useContext)(u.ImageConfigContext),r=(0,s.useMemo)(()=>{let e=g||o||h.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),n=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:n}},[o]),{onLoad:a,onLoadingComplete:c}=e,f=(0,s.useRef)(a);(0,s.useEffect)(()=>{f.current=a},[a]);let _=(0,s.useRef)(c);(0,s.useEffect)(()=>{_.current=c},[c]);let[v,b]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),{props:C,meta:E}=(0,l.getImgProps)(e,{defaultLoader:p.default,imgConf:r,blurComplete:v,showAltText:w});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m,{...C,unoptimized:E.unoptimized,placeholder:E.placeholder,fill:E.fill,onLoadRef:f,onLoadingCompleteRef:_,setBlurComplete:b,setShowAltText:S,sizesInput:e.sizes,ref:t}),E.priority?(0,i.jsx)(y,{isAppRouter:!n,imgAttributes:C}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8733:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return o}});let o=n(4732)._(n(7653)).default.createContext({})},9342:function(e,t){"use strict";function n(e){let{ampFirst:t=!1,hybrid:n=!1,hasQuery:o=!1}=void 0===e?{}:e;return t||n&&o}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return n}})},4163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return a}}),n(1673);let o=n(1059),r=n(5135);function i(e){return void 0!==e.default}function s(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function a(e,t){var n;let a,c,l,{src:h,sizes:u,unoptimized:d=!1,priority:p=!1,loading:g,className:f,quality:_,width:m,height:y,fill:v=!1,style:b,overrideSrc:w,onLoad:S,onLoadingComplete:C,placeholder:E="empty",blurDataURL:I,fetchPriority:k,layout:P,objectFit:T,objectPosition:R,lazyBoundary:M,lazyRoot:x,...$}=e,{imgConf:D,showAltText:O,blurComplete:N,defaultLoader:j}=t,A=D||r.imageConfigDefault;if("allSizes"in A)a=A;else{let e=[...A.deviceSizes,...A.imageSizes].sort((e,t)=>e-t),t=A.deviceSizes.sort((e,t)=>e-t);a={...A,allSizes:e,deviceSizes:t}}if(void 0===j)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let q=$.loader||j;delete $.loader,delete $.srcSet;let B="__next_img_default"in q;if(B){if("custom"===a.loader)throw Error('Image with src "'+h+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=q;q=t=>{let{config:n,...o}=t;return e(o)}}if(P){"fill"===P&&(v=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[P];e&&(b={...b,...e});let t={responsive:"100vw",fill:"100vw"}[P];t&&!u&&(u=t)}let L="",H=s(m),U=s(y);if("object"==typeof(n=h)&&(i(n)||void 0!==n.src)){let e=i(h)?h.default:h;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(c=e.blurWidth,l=e.blurHeight,I=I||e.blurDataURL,L=e.src,!v){if(H||U){if(H&&!U){let t=H/e.width;U=Math.round(e.height*t)}else if(!H&&U){let t=U/e.height;H=Math.round(e.width*t)}}else H=e.width,U=e.height}}let W=!p&&("lazy"===g||void 0===g);(!(h="string"==typeof h?h:L)||h.startsWith("data:")||h.startsWith("blob:"))&&(d=!0,W=!1),a.unoptimized&&(d=!0),B&&h.endsWith(".svg")&&!a.dangerouslyAllowSVG&&(d=!0),p&&(k="high");let F=s(_),z=Object.assign(v?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:T,objectPosition:R}:{},O?{}:{color:"transparent"},b),G=N||"empty"===E?null:"blur"===E?'url("data:image/svg+xml;charset=utf-8,'+(0,o.getImageBlurSvg)({widthInt:H,heightInt:U,blurWidth:c,blurHeight:l,blurDataURL:I||"",objectFit:z.objectFit})+'")':'url("'+E+'")',V=G?{backgroundSize:z.objectFit||"cover",backgroundPosition:z.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:G}:{},J=function(e){let{config:t,src:n,unoptimized:o,width:r,quality:i,sizes:s,loader:a}=e;if(o)return{src:n,srcSet:void 0,sizes:void 0};let{widths:c,kind:l}=function(e,t,n){let{deviceSizes:o,allSizes:r}=e;if(n){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let o;o=e.exec(n);o)t.push(parseInt(o[2]));if(t.length){let e=.01*Math.min(...t);return{widths:r.filter(t=>t>=o[0]*e),kind:"w"}}return{widths:r,kind:"w"}}return"number"!=typeof t?{widths:o,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>r.find(t=>t>=e)||r[r.length-1]))],kind:"x"}}(t,r,s),h=c.length-1;return{sizes:s||"w"!==l?s:"100vw",srcSet:c.map((e,o)=>a({config:t,src:n,quality:i,width:e})+" "+("w"===l?e:o+1)+l).join(", "),src:a({config:t,src:n,quality:i,width:c[h]})}}({config:a,src:h,unoptimized:d,width:H,quality:F,sizes:u,loader:q});return{props:{...$,loading:W?"lazy":g,fetchPriority:k,width:H,height:U,decoding:"async",className:f,style:{...z,...V},sizes:J.sizes,srcSet:J.srcSet,src:w||J.src},meta:{unoptimized:d,priority:p,placeholder:E,fill:v}}}},4830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return f},defaultHead:function(){return u}});let o=n(4732),r=n(5622),i=n(7573),s=r._(n(7653)),a=o._(n(9605)),c=n(8733),l=n(241),h=n(9342);function u(e){void 0===e&&(e=!1);let t=[(0,i.jsx)("meta",{charSet:"utf-8"})];return e||t.push((0,i.jsx)("meta",{name:"viewport",content:"width=device-width"})),t}function d(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===s.default.Fragment?e.concat(s.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}n(1673);let p=["name","httpEquiv","charSet","itemProp"];function g(e,t){let{inAmpMode:n}=t;return e.reduce(d,[]).reverse().concat(u(n).reverse()).filter(function(){let e=new Set,t=new Set,n=new Set,o={};return r=>{let i=!0,s=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){s=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?i=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?i=!1:t.add(r.type);break;case"meta":for(let e=0,t=p.length;e<t;e++){let t=p[e];if(r.props.hasOwnProperty(t)){if("charSet"===t)n.has(t)?i=!1:n.add(t);else{let e=r.props[t],n=o[t]||new Set;("name"!==t||!s)&&n.has(e)?i=!1:(n.add(e),o[t]=n)}}}}return i}}()).reverse().map((e,t)=>{let o=e.key||t;if(!n&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,s.default.cloneElement(e,t)}return s.default.cloneElement(e,{key:o})})}let f=function(e){let{children:t}=e,n=(0,s.useContext)(c.AmpStateContext),o=(0,s.useContext)(l.HeadManagerContext);return(0,i.jsx)(a.default,{reduceComponentsToState:g,headManager:o,inAmpMode:(0,h.isInAmpMode)(n),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1059:function(e,t){"use strict";function n(e){let{widthInt:t,heightInt:n,blurWidth:o,blurHeight:r,blurDataURL:i,objectFit:s}=e,a=o?40*o:t,c=r?40*r:n,l=a&&c?"viewBox='0 0 "+a+" "+c+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+l+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(l?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+i+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},9273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageConfigContext",{enumerable:!0,get:function(){return i}});let o=n(4732)._(n(7653)),r=n(5135),i=o.default.createContext(r.imageConfigDefault)},5135:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{VALID_LOADERS:function(){return n},imageConfigDefault:function(){return o}});let n=["default","imgix","cloudinary","akamai","custom"],o={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},5839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return c},getImageProps:function(){return a}});let o=n(4732),r=n(4163),i=n(5658),s=o._(n(3804));function a(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let c=i.Image},3804:function(e,t){"use strict";function n(e){let{config:t,src:n,width:o,quality:r}=e;return t.path+"?url="+encodeURIComponent(n)+"&w="+o+"&q="+(r||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}}),n.__next_img_default=!0;let o=n},9605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let o=n(7653),r="undefined"==typeof window,i=r?()=>{}:o.useLayoutEffect,s=r?()=>{}:o.useEffect;function a(e){let{headManager:t,reduceComponentsToState:n}=e;function a(){if(t&&t.mountedInstances){let r=o.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(n(r,e))}}if(r){var c;null==t||null==(c=t.mountedInstances)||c.add(e.children),a()}return i(()=>{var n;return null==t||null==(n=t.mountedInstances)||n.add(e.children),()=>{var n;null==t||null==(n=t.mountedInstances)||n.delete(e.children)}}),i(()=>(t&&(t._pendingUpdate=a),()=>{t&&(t._pendingUpdate=a)})),s(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},8210:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>t.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.iconList=void 0;var i=n(7653);t.iconList=function(e){return e&&Array.isArray(e.icons)?e.icons.map(function(e){return e.properties.name}):null},t.default=function(e){var t=e.iconSet,n=e.icon,s=e.size,a=e.title,c=e.disableFill,l=e.removeInlineStyle,h=e.native,u=e.SvgComponent,d=e.PathComponent,p=r(e,["iconSet","icon","size","title","disableFill","removeInlineStyle","native","SvgComponent","PathComponent"]);if(!t||!n)return null;var g=t.icons.find(function(e){return e.properties.name===n});if(!g)return null;var f={display:"inline-block",stroke:"currentColor",fill:"currentColor"};h&&(f.display="flex",f.flexDirection="row",f.flexWrap="wrap");var _=o(o(o({},l?{}:f),s?{width:s,height:s}:{}),p.style||{}),m=g.icon.width,y=g.icon.paths.map(function(e,t){var r,s=null===(r=g.icon.attrs)||void 0===r?void 0:r[t],a=o({d:e,key:n+t},!c&&s?s:{});return(0,i.createElement)(d||"path",a)});return a&&!h&&y.push((0,i.createElement)("title",{key:a},a)),(0,i.createElement)(u||"svg",o(o({},p),{viewBox:"0 0 ".concat(void 0===m?"1024":m," 1024"),style:_}),y)}},7608:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let r=((o=n(3888))&&o.__esModule?o:{default:o}).default},3888:function(e,t){"use strict";function n(e,t){return{handler:e,config:t}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}}),n.withOptions=function(e,t=()=>({})){let n=function(n){return{__options:n,handler:e(n),config:t(n)}};return n.__isOptionsFunction=!0,n.__pluginFunction=e,n.__configFunction=t,n};let o=n},1913:function(e,t,n){let o=n(7608);e.exports=(o.__esModule?o:{default:o}).default},9489:function(e,t,n){"use strict";function o(e,t){var n,o;let i,s,a,c,l,h;t=r(t||{R:255,G:255,B:255});let u=e=r(e);return void 0!==e.A&&(u={R:t.R+(e.R-t.R)*e.A,G:t.G+(e.G-t.G)*e.A,B:t.B+(e.B-t.B)*e.A}),c=(i=(n=u).R/255,s=n.G/255,a=n.B/255,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,s>.04045?s=Math.pow((s+.055)/1.055,2.4):s/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,o={X:.4124*(i*=100)+.3576*(s*=100)+.1805*(a*=100),Y:.2126*i+.7152*s+.0722*a,Z:.0193*i+.1192*s+.9505*a}).Y/100,l=o.Z/108.883,h=(h=o.X/95.047)>.008856?Math.pow(h,1/3):7.787*h+16/116,{L:116*(c=c>.008856?Math.pow(c,1/3):7.787*c+16/116)-16,a:500*(h-c),b:200*(c-(l=l>.008856?Math.pow(l,1/3):7.787*l+16/116))}}function r(e){let t,n,o,r;"R"in e?(t=e.R,n=e.G,o=e.B,r=e.A):(t=e.r,n=e.g,o=e.b,r=e.a);let i={R:t,G:n,B:o};return void 0!==r&&(i.A=r),i}function i(e){return Math.PI/180*e}function s(e,t){if(0===e&&0===t)return 0;{let n=180/Math.PI*Math.atan2(e,t);return n>=0?n:n+360}}function a(e){return 1!==(e=r(e)).A?`rgba(${e.R}, ${e.G}, ${e.B}, ${e.A})`:`rgb(${e.R}, ${e.G}, ${e.B})`}function c(e,t,n){let r=a(e);return function(e,t,n,r){let c={};r=r||{R:255,G:255,B:255},n=n||"closest";for(let l=0;l<e.length;l+=1){let h,u;let d=e[l];for(let e=0;e<t.length;e+=1){let a=t[e],c=function(e,t,n){("R"in e||"r"in e)&&(e=o(e,n)),("R"in t||"r"in t)&&(t=o(t,n));let r=e.L,a=e.a,c=e.b,l=t.L,h=t.a,u=t.b,d=Math.sqrt(Math.pow(a,2)+Math.pow(c,2)),p=Math.sqrt(Math.pow(h,2)+Math.pow(u,2)),g=(d+p)/2,f=.5*(1-Math.sqrt(Math.pow(g,7)/(Math.pow(g,7)+6103515625))),_=(1+f)*a,m=(1+f)*h,y=Math.sqrt(Math.pow(_,2)+Math.pow(c,2)),v=Math.sqrt(Math.pow(m,2)+Math.pow(u,2)),b=s(c,_),w=s(u,m),S=v-y,C=2*Math.sqrt(y*v)*Math.sin(i(function(e,t,n,o){if(e*t==0)return 0;if(180>=Math.abs(o-n))return o-n;if(o-n>180)return o-n-360;if(o-n<-180)return o-n+360;throw Error()}(d,p,b,w))/2),E=(r+l)/2,I=(y+v)/2,k=function(e,t,n,o){if(e*t==0)return n+o;if(180>=Math.abs(n-o))return(n+o)/2;if(Math.abs(n-o)>180&&n+o<360)return(n+o+360)/2;if(Math.abs(n-o)>180&&n+o>=360)return(n+o-360)/2;throw Error()}(d,p,b,w),P=1-.17*Math.cos(i(k-30))+.24*Math.cos(i(2*k))+.32*Math.cos(i(3*k+6))-.2*Math.cos(i(4*k-63)),T=1+.045*I,R=1+.015*I*P;return Math.sqrt(Math.pow((l-r)/((1+.015*Math.pow(E-50,2)/Math.sqrt(20+Math.pow(E-50,2)))*1),2)+Math.pow(S/(1*T),2)+Math.pow(C/(1*R),2)+S/(1*T)*(-2*Math.sqrt(Math.pow(I,7)/(Math.pow(I,7)+6103515625))*Math.sin(i(30*Math.exp(-Math.pow((k-275)/25,2))*2)))*(C/(1*R)))}(d,a,r);if(!h||void 0!==u&&"closest"===n&&c<u||void 0!==u&&"furthest"===n&&c>u){h=a,u=c;continue}}h&&(c[a(d)]=h)}return c}([e],t,"closest",n=n||{R:255,G:255,B:255})[r]}n.d(t,{oq:function(){return c}})},4786:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});let o="a-f\\d",r=`#?[${o}]{3}[${o}]?`,i=`#?[${o}]{6}([${o}]{2})?`,s=RegExp(`[^#${o}]`,"gi"),a=RegExp(`^${r}$|^${i}$`,"i");function c(e,t={}){if("string"!=typeof e||s.test(e)||!a.test(e))throw TypeError("Expected a valid hex string");e=e.replace(/^#/,"");let n=1;8===e.length&&(n=Number.parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),4===e.length&&(n=Number.parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let o=Number.parseInt(e,16),r=o>>16,i=o>>8&255,c=255&o,l="number"==typeof t.alpha?t.alpha:n;if("array"===t.format)return[r,i,c,l];if("css"===t.format){let e=1===l?"":` / ${Number((100*l).toFixed(2))}%`;return`rgb(${r} ${i} ${c}${e})`}return{red:r,green:i,blue:c,alpha:l}}},4986:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let o=(e,t,n,o)=>(n|t<<8|e<<16|16777216).toString(16).slice(1)+o;function r(e,t,n,r){let s=(e+(r||"")).toString().includes("%");if("string"!=typeof e||t)void 0!==r&&(r=Number.parseFloat(r));else{let o=i(e);if(!o)throw TypeError("Invalid or unsupported color format.");s=!1,[e,t,n,r]=o}if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n||e>255||t>255||n>255)throw TypeError("Expected three numbers below 256");if("number"==typeof r){if(!s&&r>=0&&r<=1)r=Math.round(255*r);else if(s&&r>=0&&r<=100)r=Math.round(255*r/100);else throw TypeError(`Expected alpha value (${r}) as a fraction or percentage`);r=(256|r).toString(16).slice(1)}else r="";return o(e,t,n,r)}let i=e=>{let t;let n=e.replace(/rgba?\(([^)]+)\)/,"$1").split(/[,\s/]+/).filter(Boolean);if(n.length<3)return;let o=(e,t)=>(e=e.trim()).endsWith("%")?Math.min(Number.parseFloat(e)*t/100,t):Math.min(Number.parseFloat(e),t),r=o(n[0],255),i=o(n[1],255),s=o(n[2],255);return 4===n.length&&(t=o(n[3],1)),[r,i,s,t]}}}]);