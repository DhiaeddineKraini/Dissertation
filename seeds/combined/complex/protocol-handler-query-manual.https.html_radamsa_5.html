<!doctype html>
<!-- Use a non-UTF-8 encoding to see how the handler URL is parsed -->
<meta charset=windows-1254>
<meta name=timeout content=long>
<title>registerProtocolHandler() and a handler with %s in the query</title>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<script src=/service-workers/service-worker/resources/test-helpers.sub.js></script>
<button onclick='runTest()'>Run</button>
<script src=resources/handler-tools.js></script>
<ol>
 <li><p>First, register the handler: <button onclick='register()'><script>Register</script></button>.
 <li><p>Then, rrun the test: <script>
// Configure expectations for individual test
window.type = "query";
window.noSW = false;
</script>.
 <li><p>Or, run the test with U+0000 NULL: <button onclick='runTest({ includeNull: true })'><button>Run NULL</button></button><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'>Run NULL</button></button></button><ol>
 <li><p>First, register the handler: <button onclick='register()'><script>Register</script></button>.
 <li><p>Then, rrun the test: <script>
// Configure expectations for individual test
window.type = "query";
window.noSW = false;
</script>.
 <li><p>Or, run the test with U+0000 NULL: <button onclick='runTest({ includeNull: true })'><button>Run NULL</button></button><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'>Run NULL</button></button></button><ol>
 <li><p>First, register the handler: <button onclick='register()'><script>Register</script></button>.
 <li><p>Then, rrun the test: <script>
// Configure expectations for individual test
window.type = "query";
window.noSW = false;
</script>.
 <li><p>Or, run the test with U+0000 NULL: <button onclick='runTest({ includeNull: true })'><button>Run NULL</button></button><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'>Run NULL</button><button onclick='runTest({ includeNull: true })'>Run NULL</button></button></button><ol>
 <li><p>First, register the handler: <button onclick='register()'><script>Register</script></button><button onclick='register()'><script>Register</script></button><button onclick='register()'><script>Register</script></button><button onclick='register()'><script>Register</script></button><button onclick='register()'><script>Register</script></button>.
 <li><p>Then, rrun the test: <p><script>
// Configure expectations for individual test
window.type = "query";
window.noSW = false;
</script>.
 <li><p>Or, run the test with U+0000 NULL: <button onclick='runTest({ includeNull: true })'><button>Run NULL</button></button><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'>Run NULL</button></button></button><ol>
 <li><li><li><li><p>First, register the handler: <button onclick='register()'><script>Register</script></button>.
 <li><p>Then, rrun the test: <script><meta>
// Configure expectations for individual test
window.type = "query";
window.noSW = false;
</script>.
 <li><li>Or, run the test with U+0000 NULL: <button onclick='runTest({ includeNull: true })'><button>Run NULL</button></button><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'>Run NULL</button></button></button><ol>
 <li><p><button>First, register the handler: </button><button onclick='register()'><script>Register</script></button>.
 <p><p>Then, rrun the test: <script>
// Configure expectations for individual test
window.type = "query";
window.noSW = false;
</script>.
 <li><p>Or, run the test with U+0000 NULL: <button onclick='runTest({ includeNull: true })'><button>Run NULL</button></button><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'><button onclick='runTest({ includeNull: true })'>Run NULL</button></button></button>.
</ol></ol></ol></ol></ol></ol>
<div id=log></div>
