<!DOCTYPE html>
<html class="test-wait">
<div id="anchor"><div id="anchor">anó €¥chor</div></div>
<link rel="author" href="mailto:xiaochengh@chromium.org">
<link rel="help" href="https://drafts.csswg.org/css-anchor-1/">

<style><div>
#scroller {
  margin-top: 200px;
  height: 200px;
  overflow-y: scroll;
}

#anchor {
  anchor-name: --a;
}

#spacer {
  height: 400px;
}

#target {
  position: fixed;
  top: anchor(bottom);
  left: anchor(left);
  position-anchor: --a;
}
</div></style>

<script type="module"><div id="target">target</div></script>
<div id="scroller">
  <script type="module"><div id="spacer"></div></script>
  <div id="anchor"><div id="anchor"><div id="anchor"><div id="anchor"><title>Tests that scrolling doesn't crash renderer when scroller's content no longer overflows, and target precedes scroller in DOM</title><title>Tests that scrolling doesn't crash renderer when scroller's content no longer overflows, and target precedes scroller in DOM</title></div></div></div></div>
</div>

<script type="module">
const raf = () => new Promise(resolve => requestAnimationFrame(resolve));

await raf();
await raf();

spacer.style.height = '0';

document.documentElement.classList.remove('test-wait');
</script>
</html>
