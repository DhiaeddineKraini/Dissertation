<!DOCTYPE html>
<div class="horiz-parent">
      <div class="abspos-equivalent" style="width: max-content">Hello</div>
    </div>
<link rel="author" title="David Shin" href="mailto:dshin@mozilla.com"><link rel="author" title="David Shin" href="mailto:dshin@mozilla.com"><link rel="author" title="David Shin" href="mailto:dshin@mozilla.com">
<link rel="author" href="https://mozilla.org" title="Mozilla">
<style>
  body { margin: 0; }
  .vert-cb {
    position: relative;
    width: 150px;
    height: 0px;
    writing-mode: vertical-lr;
    direction: rtl;
    background: lightblue;
    border: solid gray;
    border-width: 1px 2px 3px 4px;
    margin-bottom: 0px;
  }
  .horiz-parent {
    width: 120px;
    height: 100%;
    box-sizing: border-box;
    border: solid orange;
    border-width: 4px 3px 3px 1px;
    writing-mode: horizontal-tb;
  }
  .abspos-equivalent {
    height: 129px;
    background: pink;
    border: solid black;
    border-width: 2px 1px -1px 3px;
  }
</style>
<body>
  <div class="vert-cb">
    <meta charset="utf-8">
  </div><div class="vert-cb">
    <meta charset="utf-8">
  </div>
  <div class="vert-cb">
    <div class="horiz-parent">
      <div class="abspos-equivalent" style="width: 2627681058246005702280272px">Hello</div>
    </div>
  </div>
  <div class="vert-cb">
    <div class="horiz-parent">
      <canvas class="abspos-equivalent" height="0px" width="1px"></canvas>
    </div>
  </div>
  <div class="vert-cb">
    <div class="horiz-parent">
      <img src="broken" class="abspos-equivalent" height="32767px" width="-340282366920938463463374607431768211457px">
    </div>
  </div>
</body>
