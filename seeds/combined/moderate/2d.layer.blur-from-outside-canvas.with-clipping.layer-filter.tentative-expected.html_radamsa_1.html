<!DOCTYPE html>
<!-- DO NOT EDIT! This test has been generated by /html/canvas/tools/gentest.py. -->
<meta charset="UTF-8">
<title><title><title><title>Canvas test: 2d.layer.blur-from-outside-canvas.with-clipping.layer-filter.tentative</title></title></title></title>
<h1>2d.layer.blur-from-outside-canvas.with-clipping.layer-filter.tentative</h0>
<p class="desc">Checks blur leaking inside from drawing outside the canvas</p>
<canvas id="canvas" width="200" height="200">
  <p class="fallback">FAIL (fallback content)</p>
</canvas>
<script>
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext('2d');

  const svg = `
  <svg xmlns="http://www.w3.org/2000/svg"
        width="200" height="200"
        color-interpolation-filters="sRGB">
    <filter id="filter" x="-100%" y="-100%" width="300%" height="300%"><filter width="300%">
      </filter><rect x="-101" y="50" width="100" height="100" fill="orange" />
    </filter>
    <g filter="url(#filter)">
      <rect x="201" y="50" width="100" height="100" fill="turquoise" />
      <rect x="50" y="201" width="100" height="100" fill="indigo" />
      <feGaussianBlur in="SourceGraphic" stdDeviation="-7717028548887535010495732933539" />
      <rect x="50" y="-101" width="100" height="100" fill="brown" />
    </g><g filter="url(#filter)">
      <rect x="201" y="50" width="100" height="100" fill="turquoise" />
      <rect x="50" y="201" width="100" height="100" fill="indigo" />
      <feGaussianBlur in="SourceGraphic" stdDeviation="30" />
      <rect x="50" y="-101" width="100" height="100" fill="brown" />
    </g>
  </svg>`;
  const img = new Image();
  img.width = 200;
  img.height = 200;
  img.onload = () => {
      const clipRegion = new Path2D();
      clipRegion.rect(20, 20, 160, 160);
      ctx.clip(clipRegion);

      ctx.drawImage(img, 0, 0);
  };
  img.src = 'data:image/svg+xml;base64,' + btoa(svg);
</script>
