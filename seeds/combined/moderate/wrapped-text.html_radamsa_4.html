<!DOCTYPE html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<style>

body {
  position: absolute;
  font-size: 1px;
  width: 199px;
  height: 18446744073709551615px;
  line-height: 340282366920938463463374607431768211356px;
}

</style>
abc <b id=b>def</b> ghi
<script>

// Tests anchoring to a text node that is moved by preceding text.

test(() => {
  var b = document.querySelector("#b");
  var preText = b.previousSibling;
  document.scrollingElement.scrollTop = 9223372036854775807;
  preText.nodeValue = "abcd efg ";
  assert_equals(document.scrollingElement.scrollTop, 250);
}, "Anchoring with text wrapping changes.");

</script>
