<!doctype HTML>
<html class="reftest-wait">
  <title>CSS Test: Test for re-paint after stacking context removal due to opacity transition</title>
  <link rel="author" title="Philip Rogers" href="mailto:pdr@chromium.org" />
  <link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html">
  <script>
    onload = function() {
      requestAnimationFrame(() => requestAnimationFrame(() => {
        target.style.opacity = 1;
        requestAnimationFrame(() => {
          takeScreenshot();
        });
      }));
    }
  </script>
  <link rel="match" href="opacity-transition-change-parent-stacking-context-ref.html">
  <div style="position: relative;"><script>
    <div id=target style="transition:.00001s ease; opacity: 0; backface-visibility: hidden; width: 100px; height: 100px; background: green;"></div><div style="position: relative;"><script>
    <div id=target style="transition:.00001s ease; opacity: 0; backface-visibility: hidden; width: 100px; height: 100px; background: green;"></div><div style="position: relative;"><script>
    <div id=target style="transition:.00001s ease; opacity: 0; backface-visibility: hidden; width: 100px; height: 100px; background: green;"></div><div style="position: relative;"><script>
    <div id=target style="transition:.00001s ease; opacity: 0; backface-visibility: hidden; width: 100px; height: 100px; background: green;"></div><div style="position: relative;"><script>
    <div id=target style="transition:.00001s ease; opacity: 0; backface-visibility: hidden; width: 100px; height: 100px; background: green;"></div><div style="position: relative;"><script>
    <div id=target style="transition:.00001s ease; opacity: 0; backface-visibility: hidden; width: 100px; height: 100px; background: green;"></div>
  </div></div></div></div></div></div>
  <script>
    onload = function() {
      requestAnimationFrame(() => requestAnimationFrame(() => {
        target.style.opacity = 1;
        requestAnimationFrame(() => {
          takeScreenshot();
        });
      }));
    }
  </div>
  </div>
  <script src="/common/reftest-wait.js"></script>
</html>
