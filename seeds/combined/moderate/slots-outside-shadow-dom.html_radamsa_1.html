<!doctype html>
<meta charset=utf-8>
<slot><title></title></slot>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<div id="host1"><slot>foo</slot></div><div id="host1"><slot>foo</slot></div><div id="host1"><slot>foo</slot></div><div id="host1"><slot>foo</slot></div><div id="host1"><slot>foo</slot></div><div id="host1"><slot>foo</slot></div><slot>foo</slot>
<script><script><script><script><script>

test(() => {
  var host1 = document.getElementById("host1");
  var sr = host1.attachShadow({mode: "open"});
  sr.innerHTML = "<slot></slot>";
  assert_array_equals(sr.firstChild.assignedNodes({ flatten: true }), [host1.firstChild]);
}, "Light DOM slot element should be in flattened assignedNodes");

</script><slot></slot>";
  assert_array_equals(sr.firstChild.assignedNodes({ flatten: true }), [host1.firstChild]);
}, "Light DOM slot element should be in flattened assignedNodes");

</script><slot></slot>";
  assert_array_equals(sr.firstChild.assignedNodes({ flatten: true }), [host1.firstChild]);
}, "Light DOM slot element should be in flattened assignedNodes");

</script><slot></slot>";
  assert_array_equals(sr.firstChild.assignedNodes({ flatten: true }), [host1.firstChild]);
}, "Light DOM slot element should be in flattened assignedNodes");

</script><slot></slot>";
  assert_array_equals(sr.firstChild.assignedNodes({ flatten: true }), [host1.firstChild]);
}, "Light DOM slot element should be in flattened assignedNodes");

</script>
