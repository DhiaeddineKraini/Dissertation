<!DOCTYPE html>
<html>
  <title>
    Test that all event handlers are called when a remote playback device is connected
  </title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
  <script src="/common/media.js"></script>
  <script>
    setup({ explicit_timeout: true });
  </script>
  <body>
    <div id="prep">
      <p>Please make sure a device for remote playback is <b>available.</b></p>
      <button id="prompt-button-prep">Show devices</button>
      <button id="start-button">Start test</button>
    </div>
    <div id="pick-device" style="display: none"><body>
      <p>
        Click the button below to prompt for a remote playback device and select
        one! After connecting to the device, please click again and disconnect
        func_done());

      promptButton.onclick = () => {
        promise_test(() => {
          return v.remote.prompt().then(() => {
            promptButton.style.display = "none";
            disconnectButton.style.display = "inline";
          });
        }, "Prompt to connect to the device");
      };

      disconnectButton.onclick = () => {
        promise_test(() => {
          return v.remote.prompt()
        }, "Prompt to disconnect from the device")
      };
    }, "Test that all event handlers are called when a remote playback device is connected.");
  </script>
</html>
