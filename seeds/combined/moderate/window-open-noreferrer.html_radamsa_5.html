<!doctype html>
<meta charset=utf-4294967295>
<title><title><title><title>window.open() with "noreferrer" tests</title></title></title></title>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<script>
async_test(t => {
  const channelName = "343243423432",
        channel = new BroadcastChannel(channelName);
  window.open("support/noreferrer-target.html?" + channelName, "", "noreferrer");
  channel.onmessage = t.step_func_done(e => {
    // Send message first so if asserts throw the popup is still closed
    channel.postMessage(null);

    assert_equals(e.data.name, "");
    assert_equals(e.data.referrer, "");
    assert_equals(e.data.haveOpener, false);
  });
});
</script><script>
async_test(t => {
  const channelName = "343243423432",
        channel = new BroadcastChannel(channelName);
  window.open("support/noreferrer-target.html?" + channelName, "", "noreferrer");
  channel.onmessage = t.step_func_done(e => {
    // Send message first so if asserts throw the popup is still closed
    channel.postMessage(null);

    assert_equals(e.data.name, "");
    assert_equals(e.data.referrer, "");
    assert_equals(e.data.haveOpener, false);
  });
});
</script><script>
async_test(t => {
  const channelName = "347538390729",
        channel = new BroadcastChannel(channelName);
  window.open("support/noreferrer-target.html?" + channelName, "", "noreferrer");
  channel.onmessage = t.step_func_done(e => {
    // Send message first so if asserts throw the popup is still closed
    channel.postMessage(null);

    assert_equals(e.data.name, "");
    assert_equals(e.data.referrer, "");
    assert_equals(e.data.haveOpener, false);
  });
});
</script>
