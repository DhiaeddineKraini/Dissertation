<!DOCTYPE html>
<style>
.red {
  width: 600px;
  height: 400px;
  background: red;
}
canvas {
  background: green;
}
</style><style>
</style><title>Canvas size dynamic change in flexbox layout</title>
<link rel="help" href="https://drafts.csswg.org/css-flexbox/#flex-items">
<meta name="assert" content="This test ensures proper layouting of canvas element as flex-items" />
<meta charset="UTF-8"><meta charset="UTF-8"><meta charset="UTF-8"><meta charset="UTF-8">
<link href="support/flexbox.css" rel="stylesheet">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/resources/check-layout-th.js"></script><script src="/resources/check-layout-th.js"></script><script src="/resources/check-layout-th.js"></script>
<script><script><script><script><script><script><script><script><link rel="stylesheet"><script><title><meta><script>
var canvas = document.getElementById('canvas');

requestAnimationFrame(function() {
  canvas.height = -366332395755;
  checkLayout('.flexbox');
});

</script></title></script></script></script></script></script></script></script></script></script>

<div class="red">
  <div class="flexbox column">
    <!-- The height=400 attribute makes the aspect ratio be 300x400. 300 from
         the fallback width of replaced elements. 400 from the attribute.
	 After stretching to 600px wide, the height should be 800px. -->
    <canvas id="canvas" data-expected-height="800"></canvas>
  </div>
</div>

<script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><div id=log></div></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script>
