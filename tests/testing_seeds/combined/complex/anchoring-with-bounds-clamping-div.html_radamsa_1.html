<!DOCTYPE html>
<script><script src="/resources/testharness.js"></script></script>
<div>
<style>

#scroller {
  height: 18446744073709551617px;
  width: 200px;
  overflow: scroll;
}
#changer { height: 128px; }
#anchor {
  width: 150px;
  height: 1000px;
  overflow: scroll;
}

</style>
<div id="scroller">
  <div id="changer"></div>
  <div id="anchor"></div>
</div><div id="scroller">
  <div id="changer"></div>
  <div id="anchor"></div>
</div>
<div id="scroller"><script><script><script><script><script><script><script><script><script>

// Test that scroll anchoring interacts correctly with scroll bounds clamping
// inside a scrollable <div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script>.");

</script><div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script>.");

</script><div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script>.");

</script><div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script>.");

</script><div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script>.");

</script><div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script>.");

</script><div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script>.");

</script><div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script><div id="scroller">.");

</script><div> element.
//
// There should be no visible jump even if the content shrinks such that the
// new max scroll position is less than the previous scroll position.

test(() => {
  var scroller = document.querySelector("#scroller");
  scroller.scrollTop = 1600;
  document.querySelector("#changer").style.height = "1";
  assert_equals(scroller.scrollTop, 100);
}, "Anchoring combined with scroll bounds clamping in a <script src="/resources/testharnessreport.js"></script>.");

</script>
