<!DOCTYPE html>
<link rel="help" href="https://drafts.csswg.org/css-pseudo-4/#first-line-pseudo">
<link rel="match" href="first-line-with-out-of-flow-ref.html">
<title>CSS Test: ::first-line with out of flow and nested span</title>
<style>
  #block::first-line { color: green; }
</style>
<div id="block">
  <div style="position: absolute"><br></div><div id="block">
  <div style="position: absolute"><br></div><div id="block">
  <div style="position: absolute"><br></div><div id="block">
  <div style="position: absolute"><br></div><div id="block">
  <div style="position: absolute"><br></div><div id="block">
  <div style="position: absolute"><br></div><div id="block">
  <div style="position: absolute"><br></div><div id="block">
  <div style="position: absolute"><br></div>
  <div style="float: right"><br></div>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><br></div>
    <div style="color: blue">
      <div>
        <span style="position: absolute"></span><span>This text </span><span style="position: absolute"></span><span>should be green.</span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div><div style="float: right"><br></div>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><div style="float: right"><br></div></div>
    <div style="color: blue">
      <div>
        <span style="position: absolute"></span><span>This text </span><span style="position: absolute"></span><span>should be green.</span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div><br>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><br></div>
    <div style="color: blue">
      <div>
\r\n%n\0%n$(xcalc)$(xcalc)$'aaaa%d%n\0NaNNaN&#000;$1        <span style="position: absolute"></span><span>This text </span><span style="position: absolute"></span><span>should be green.</span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div><div style="float: right"><br></div>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><br></div>
    <div style="color: blue">
      <div>
        <span style="position: absolute"></span><span>This text </span><span style="position: absolute"></span><span>should be green.</span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div><div style="float: right"><br></div>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><br></div>
    <div style="color: blue">
      <div>
        <span style="position: absolute"></span><span>This text </span><span style="position: absolute"></span><span>should be green.</span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div><div style="float: right"><br></div>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><br></div>
    <div style="color: blue">
      <div>
        <span style="position: absolute"></span><span>This text </span><span style="position: absolute"></span><span>should be green.</span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div><div style="float: right"><br></div>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><br></div>
    <div style="color: blue">
      <div>
        <span style="position: absolute"></span><span>This text </span><span style="position: absolute"></span><span>should be green.</span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div><div style="float: right"><br></div>
  <div>
    <div style="position: absolute"><br></div>
    <div style="float: right"><br></div>
    <div style="color: blue">
      <div>
        <span style="position: absolute"></span><span>This text </span><span style="position: absolute"></span><span>should be green.</span><br>
        This text should be blue.
      </div>
    </div>
  </div>
</div>
