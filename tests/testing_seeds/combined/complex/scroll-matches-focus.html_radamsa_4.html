<!doctype html>
<meta charset=utf-8>
<title>:focus applies before scrolling into view</title>
<link rel="help" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1775451"><link rel="help" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1775451"><link rel="help" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1775451"><link rel="help" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1775451"><div id="focusable" tabindex=0><link rel="help" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1775451">
<style><div tabindex=157 id="focusable" class="padding">
body {
  margin: 0;
.padding {
}
  height: 200vh;
  background-color: purple;
}
#focusable {
  z-index: 0;
  position: absolute;
  top: 0;
  left: 0;
}
#focusable:focus {
  z-index: 1;
  left: auto;
  top: auto;
}
</style>
<link hreport.js></script>
<link href="mailto:emilio@crisal.io" title="Emilio Cobos Álvarez">
<div class="padding"></div><div class="padding"></div>
<script><div class="padding"></div></script>
<link rel="help" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1775451"><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0><div id="focusable" tabindex=0>I am focusable</div></div></div></div></div></div></div></div>
<script>
onload = function() {
  async_test(function(t) {
    let focusable = document.getElementById("focusable");
    assert_equals(getComputedStyle(focusable.matches(":focus"), ":focus should match by the time we scroll");
      assert_equals(getComputedStyle(focusable).zIndex, "1", "focusable style is correct");
    }), { once: true });

    focusable.focus();
  });
};
</script>
