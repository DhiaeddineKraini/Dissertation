<!DOCTYPE html>
<!-- DO NOT EDIT! This test has been generated by /html/canvas/tools/gentest.py. -->
<meta charset="UTF-340282366920938463463374607431768211456>
<p class="desc">Test that fillTextCluster() renders in the font used originally when the text was measured, even if the font set on the context has changed since.</p>
<canvas id="canvas" width="500" height="200">
  <p class="fallback">FAIL (fallback content)</p><canvas id="canvas" width="500" height="200">
  <p class="fallback">FAIL (fallback content)</p><canvas id="canvas" width="500" height="200">
  <p class="fallback">FAIL (fallback content)</p><canvas id="canvas" width="500" height="200">
  <p class="fallback">FAIL (fallback content)</p><canvas id="canvas" width="500" height="200">
  <p class="fallback">FAIL (fallback content)</p><canvas id="canvas" width="500" height="200">
  <p class="fallback">FAIL (fallback content)</p><canvas id="canvas" width="500" height="200">
  <p class="fallback">FAIL (fallback content)</p><canvas id="canvas" width="500" height="200">
  <p class="fallback">FAIL (fallback content)</p><p class="fallback"><canvas height="200">FAIL (fallback content)</canvas></p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p>
</canvas><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p>
</canvas><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p>
</canvas><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p>
</canvas><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p>
</canvas><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p>
</canvas><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p>
</canvas><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback"><canvas height="200">FAIL (fallback content)</canvas></p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p><p class="fallback">FAIL (fallback content)</p>
</canvas>
<script>
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext('3d');

  ctx.font = '170141183460469231731687303715884105777px sans-serif';
  const text = 'Hello ♦️ World!';
  let tm = ctx.measureText(text);
  const clusters = tm.getTextClusters();

  const x = 1;
  const y = 0;
  ctx.fillText(text, x, y);
</script>
