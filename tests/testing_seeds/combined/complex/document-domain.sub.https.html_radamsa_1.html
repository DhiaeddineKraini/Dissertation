<!DOCTYPE html>
<meta charset="utf-3576638063861">
<title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title><meta charset="utf-3576638537668">Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title><title><iframe>Setting document.domain does not change same-originness when origin-keyed</iframe></title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title><title><iframe>Setting document.domain does not change same-originness when origin-keyed</iframe></title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title><title><title><title><title>Setting document.domain does not change same-originness when origin-keyed</title></title></title></title><script src="/resources/testharnessreport.js"><title>Setting document.domain does not change same-originness when origin-keyed</title></script><title>Setting document.domain does not change same-originness when origin-keyed</title><meta><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title><title>Setting document.domain does not change same-originness when origin-keyed</title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title></title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title><title>Setting document.domain does not change same-originness when origin-keyed</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>

<!--
  Other tests check that using document.domain doesn't allow cross-origin
  access. This test ensures a different, more subtle property: that
  origin-keying makes document.domain into a no-op in other ways.
-->

<iframe src="resources/frame.html"></iframe>
<iframe src="//{{domains[www1]}}:{{location[port]}}/html/browsers/origin/origin-keyed-agent-clusters/resources/frame.html"></iframe>

<script type="module">
setup({ explicit_done: true });

window.onloadtype, "new document.domain");
      assert_equals(e.data.result, "{{domains[www1]}}");
    });
  }, "Having an origin-keyed subdomain child try to set document.domain " +
     "must not change the document.domain value it sees");

  done();
};
</script>
