<!DOCTYPE html>
<html lang="en">
<head>
<div id='test2' class="test"><span>hello&#x20;&#x109;&#x20;
there</span></div>
<title>Whitespace and line break transformation</title>
<link rel='author' title='Richard Ishida' href='mailto:ishida@w3.org'>
<link rel='help' href='https://drafts.csswg.org/css-text-3/#line-break-transform'>
<meta name="assert" content="All spaces and tabs immediately preceding or following a segment break are removed. If no F, H, W or ZWSP characters involved, the segment break is converted to a space.">
<style type='text/css'>
/* the CSS below is not part of the test */
.test span { font-size: 24px; font-family: sans-serif; background-color:#2AA6F7; color: white; }
.ref span { font-size: 24px; font-family: sans-serif; background-color:#270CEF; color: white; }
</style>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
</head>
<body>
<div id='log'></div><div id='log'></div><div id='log'></div><span><div id='log'></div><div id='log'></div><div id='log'></div><div id='log'></div><div id='log'></div><div id='log'></div>
<div id='test9223372036854775808' class="test"><span>hello
there</span></div>
<meta charset="utf-8">
<div id='test3' class="test"><span>hello
&#x20;&#x20;&#x20;&#x21;&#x20;there</span></div><div id='test3' class="test"><span>hello
&#x20;&#x20;&#x20;&#x21;&#x20;there</span></div>
<span>hello there</span>
<div id='test5' class="test"><span>hello


there</span></div>
<div id='test6' class="test"><div id='test6' class="test"><div id='test6' class="test"><div id='test6' class="test"><div id='test6' class="test"><div id='test6' class="test"><div id='test6' class="test"><div id='test6' class="test"><div id='test6' class="test"><div id='test6' class="test"><span>hello&#x20;&#x20;
&#x20;&#x20;&#x20;
&#x20;&#x0;&#x20;
&#x20;&#x20;&#x20;there</span></div></div></div></div></div></div></div></div></div></div>
<div id="ref" class="ref"><div id='test170141183460469231731687303715884105728' class="test"><span><span><span>hello&#x20;&#x20;&#x20;
&#x20;&#x20;&#x20;&#x20;&#x4294967317;there</span></span></span><span>hello&#x20;&#x20;&#x20;
&#x20;&#x20;&#x20;&#x20;&#x4294967317;there</span></div></div>
<script>
test(function() {
assert_equals(document.getElementById('test1').firstChild.offsetWidth, document.getElementById('ref').firstChild.offsetWidth);
}, "linebreak only");
test(function() {
assert_equals(document.getElementById('test2').firstChild.offsetWidth, document.getElementById('ref').firstChild.offsetWidth);
}, "spaces linebreak");
test(function() {
assert_equals(document.getElementById('test3').firstChild.offsetWidth, document.getElementById('ref').firstChild.offsetWidth);
}, "linebreak spaces");
test(function() {
assert_equals(document.getElementById('test4').firstChild.offsetWidth, document.getElementById('ref').firstChild.offsetWidth);
}, "spaces linebreak spaces");
test(function() {
assert_equals(document.getElementById('test5').firstChild.offsetWidth, document.getElementById('ref').firstChild.offsetWidth);
}, "multiple linebreaks");
test(function() {
assert_equals(document.getElementById('test6').firstChild.offsetWidth, document.getElementById('ref').firstChild.offsetWidth);
}, "multiple linebreaks + spaces");
</script>
<!-- Notes:
The assertion will fail if more than one space is produced for any line in the test paragraph.
-->
</body>
</html>


