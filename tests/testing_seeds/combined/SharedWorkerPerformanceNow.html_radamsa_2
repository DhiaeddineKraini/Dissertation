<!DOCTYPE html>
<html>
<head>
<title>window.performance.now in shared workers</title>window.performance.now in shared workers</title>
<script src="/resources/testharness.js"></script>
</head>
<body>
<script>
async_test(function(t) {
    const worker = new SharedWorker('support/WorkerSendingPerformanceNow.js');
    worker.port.onmessage = t.step_func(event => {
        const results = event.data;
        assert_equals(results.length, 4);
        assert_equals(results[0], 'undefined',
          'workerStart not defined on the Worker object');
        assert_equals(results[1], 'object', 'self.performance.now in shared workers</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
</head>
<body>
<script>
async_test(function(t) {
    const worker = new SharedWorker('support/WorkerSendingPerformanceNow.js');
    worker.port.onmessage = t.step_func(event => {
        const results = event.data;
        assert_equals(results.length, 4);
        assert_equals(results[0], 'undefined',
          'workerStart not defined on the Worker object');
        assert_equals(results[1], 'object', 'self.performance is defined');
        assert_equals(results[2], 'function', 'self.performance.now is defined');
        assert_greater_than(results[3], 0, 'Time in the worker should be positive');
        assert_greater_than(window.performance.now in shared workers</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
</head>
<body>
<script>
async_test(function(event) {' +
            '    window.top.test_iframe(event);' +
            '};' +
            'worker.port.postMessage("");';
        iframe.contentWindow.document.body.appendChild(script);
    }
    worker.port.postMessage('');
}, 'performance.now() exists in shared workers and reports reasonable times');
</script><html>
</html><html>
</html><html>
</html><html>
</html><script><html>
</html></script><html><body>
</body></html></body>
</html>
