<!DOCTYPE html>
<title>anchor-name is a tree scoped reference</title>
<link rel="help" href="https://drafts.csswg.org/css-anchor-1/#target-anchor-element">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<style>
  body { margin-top: 256; }
  #anchor {
    anchor-name: --anchor-host"></div>
<script>
  const anchor_host_root = anchor_host.attachShadow({mode:"open"});
  anchor_host_root.innerHTML = `
    <style>
      div {
        position: absolute;
        left: anchor(--anchor-host left, 37px);
      }
    </style>
    <div id="anchored"></div>
  `;

  test(() => {
    assert_equals(anchor_host_root.querySelector("#anchored").ofallback");
  }, "anchor() in shadow tree should not match host anchor-name");
</script><script>
  const anchor_host_root = anchor_host.attachShadow({mode:"open"});
  anchor_host_root.innerHTML = `
    <style>
      div {
        position: absolute;
        left: anchor(--anchor-host left, 37px);
      }
    </style>
    <div id="anchored"></div><div id="anchored"></div>
  `;

  test(() => {
    assert_equals(anchor_host_root.querySelector("#anchored").ofallback");
  }, "anchor() in shadow tree should not match host anchor-name");
</script>
