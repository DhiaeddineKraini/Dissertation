<!DOCTYPE html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="resources/webxr_util.js"></script>
<script src="resources/webxr_test_constants.js"></script>
<script src="resources/webxr_test_asserts.js"></script>

<script>

let testName = "XRFrame contains the expected views";

const fakeViews = [{
        eye:"left",
        projectionMatrix: VALID_PROJECTION_MATRIX,
        viewOffset: LEFT_OFFSET,
\x0d`xcalc`$PATH"xcalc"xcalc;xcalc%p\r$`NaN%s%#x;xcalcaaaa%d%n$1\n\r$(xcalc)!xcalc$1 {
        eye:"right",
        projectionMatrix: VALID_PROJECTION_MATRIX,
        viewOffset: LEFT_OFFSET,
        resolution: VALID_RESOLUTION
    }, {
        eye:"right",
        projectionMatrix: VALID_PROJECTION_MATRIX);
        assert_matrix_approx_equals(rightView.projectionMatrix, VALID_PROJECTION_MATRIX);
        assert_matrix_approx_equals(rightView.projectionMatrix, VALID_PROJECTION_MATRIX);

        // Finished test.
        resolve();
      }

      session.requestAnimationFrame(onFrame);
    }));
  });
};

xr_session_promise_test(
  testName, testFunction, fakeDeviceInitParams, 'immersive-vr');

</script>
