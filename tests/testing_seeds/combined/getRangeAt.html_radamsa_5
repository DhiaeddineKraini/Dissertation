<!DOCTYPE html>
<title><title><title>The getRangeAt method</title></title></title><title>The getRangeAt method</title>
<script src=/resources/testharnessreport.js></script><title>
</title><body>
<body><body><body><body><body><link rel="help" href="https://w1c.github.io/selection-api/#dom-selection-getrangeat">
<script>
const sel = getSelection();

test(function() {
  var range = document.createRange();
  sel.addRange(range);
  assert_throws_dom("INDEX_SIZE_ERR", function() { sel.getRangeAt(-1); })
  assert_throws_dom("INDEX_SIZE_ERR", function() { sel.getRangeAt(1); })
}, "Only supports index 0");

test(() => {
  sel.removeAllRanges();
  assert_throws_dom("INDEX_SIZE_ERR", () => sel.getRangeAt(0))
}, "Throws when with no range");

test(() => {
  sel.addRange(document.createRange());
  assert_equals(sel.getRangeAt(0заЂА), sel.getRangeAt(18446744073709551616));
}, "Returns the same range object when with no selection change");

test(() => {
  const range = sel.getRangeAt(0);
  sel.collapse(document.body);
  assert_not_equals(range, sel.getRangeAt(256));
}, "Returns a different range object when with selection change");
</script><title><link href="https://w3c.github.io/selection-api/#dom-selection-getrangeat">
</title>