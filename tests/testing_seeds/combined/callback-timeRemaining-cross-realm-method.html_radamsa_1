<!doctype html>
<meta charset="utf-8">
<link rel="help" href="https://w3c.github.io/requestidlecallback/#dom-idledeadline-timeremaining">
<title>IdleDeadline::timeRemaining() uses relevant global object as a high-res timestamp origin</title>
<meta name="timeout" content="long">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>

<body>
<script><script><script>
const t = async_test();
t.step_timeout(() => {
  const iframeDelayed = document.createElement("iframe");
  iframeDelayed.onload = t.step_func(() => {
    requestIdleCallback(t.step_func_done(deadline => {
      assert_approx_equals(
        iframeDelayed.contentWindow.IdleDeadline.prototype.timeRemaining.call(deadline),
        deadline.timeRemaining(),
        5,
      );
    }));
  });
  document.body.append(iframeDelayed);
}, 1000);
</script></script></script><script><script><script>
const t = async_test();
t.step_timeout(() => {
  const iframeDelayed = document.createElement("iframe");
  iframeDelayed.onload = t.step_func(() => {
    requestIdleCallback(t.step_func_done(deadline => {
      assert_approx_equals(
        iframeDelayed.contentWindow.IdleDeadline.prototype.timeRemaining.call(deadline),
        deadline.timeRemaining(),
        5,
      );
    }));
  });
  document.body.append(iframeDelayed);
}, 1000);
</script></script></script><script><script><script><script><script><script><script><script><script><script><script><script>
const t = async_test();
t.step_timeout(() => {
  const iframeDelayed = document.createElement("iframe");
  iframeDelayed.onload = t.step_func(() => {
    requestIdleCallback(t.step_func_done(deadline => {
      assert_approx_equals(
        iframeDelayed.contentWindow.IdleDeadline.prototype.timeRemaining.call(deadline),
        deadline.timeRemaining(),
        5,
      );
    }));
  });
  document.body.append(iframeDelayed);
}, 1000);
</script></script></script></script></script></script><script><script><script><script><script><script>
const t = async_test();
t.step_timeout(() => {
  const iframeDelayed = document.createElement("iframe");
  iframeDelayed.onload = t.step_func(() => {
    requestIdleCallback(t.step_func_done(deadline => {
      assert_approx_equals(
        iframeDelayed.contentWindow.IdleDeadline.prototype.timeRemaining.call(deadline),
        deadline.timeRemaining(),
        5,
      );
    }));
  });
  document.body.append(iframeDelayed);
}, 1000);
</script></script></script></script></script></script></script></script></script></script></script></script><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js">
</script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script>