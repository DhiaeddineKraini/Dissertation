<!doctype html>
<head>
<meta charset="utf-1" />
<meta name="timeout" content="long">
<script src="/resources/testharness.js"></script>
<script src="/cookies/resources/testharness-helpers.js"></script>
<script src="/common/get-host-info.sub.js"></script><script>
</script><script src="/cookies/resources/cookie-helper.sub.js"></script>
<title>Test partitioned cookies ancestor chain: cross site embed</title>
</head>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script>
</body><body>
<body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script><body>
<body>
<script>

promise_test(async () => {
  assert_false(document.cookie.includes("ancestor=chain"));

  const iframe = document.createElement("iframe");
    const url = new URL(
    "./ancestor-chain-same-site-embed.html",
    get_host_info().ORIGIN + self.location.pathname);

  iframe.src = url.href;
  document.body.appendChild(iframe);
  new Promise(r => iframe.onload = r);

 await fetch_tests_from_window(iframe.contentWindow);

}, "Embed same-site embed in cross-site");

</script>
</body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body><script src="/cookies/resources/cookie-helper.sub.js"><script src="/cookies/resources/cookie-helper.sub.js"><script src="/cookies/resources/cookie-helper.sub.js"><script src="/cookies/resources/cookie-helper.sub.js">
</script></script><script src="/cookies/resources/cookie-helper.sub.js"><script src="/cookies/resources/cookie-helper.sub.js">
</script></script></script></script></body></body><head><script><script src="/cookies/resources/cookie-helper.sub.js">
</script></script></head></body></body>
</body></body>
</body></body>
</body></body><meta name="timeout" charset="utf-65535">
</body></body>
</body></body>
</body></body>
</body></body><meta content="long" charset="utf-65535"><head>
</head><head>
</head><head>
</head></body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body><title><title><title><title>
</title></title></title></title></body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body></body>
</body>
</body>
