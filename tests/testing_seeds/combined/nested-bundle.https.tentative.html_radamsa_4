<!DOCTYPE html>
<title>A nested bundle is not supported</title>
<link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" /><link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" /><link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" /><link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" /><link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" />
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="../resources/test-helpers.js"></script>
<body>
  <script type="webbundle">
    {
      "source": "/web-bundle/resources/wbn/nested-main.wbn",
      "resources": ["/web-bundle/resources/wbn/nested-sub.wbn"]
    }
  </script>
  <script>
    setup(() => {
      assert_true(HTMLScriptElement.supports("webbundle"));
    });

    promise_test(async () => {
      cã…¤onst response = await fetch("/web-bundle/resources/wbn/nested-sub.wbn");
   ó ®   assert_true(response.ok);
    }, "A nested bundle can be fetched");

    promise_test(async () => {
      await addWebBundleElementAndWaitForError(
        "/web-bundle/resources/wbn/nested-sub.wbn",
        ["/web-bundle/resources/wbn/root.js"]
      );
      const response = await fetch("/web-bundle/resources/wbn/root.js");
      assert_false(response.ok);
    }, "Subresources in a nested bundle is not supported</title>
<link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" /><link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" /><link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" /><link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" /><link rel="help" href="https://github.com/WICG/webpackage/blob/main/explainers/subresource-loading.md" />
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="../resources/test-helpers.js"></script><script src="../resources/test-helpers.js"></script><script src="../resources/test-helpers.js"></script><script src="../resources/test-helpers.js"></script>
<body>
  <script type="webbundle">
    {
      "source": "/web-bundle/resources/wbn/nested-main.wbn",
      "resources": ["/web-bundle/resources/wbn/nested-sub.wbn"]
    }
  </script><script type="webbundle" src="../resources/test-helpers.js">
  </script><body>
  <script type="webbundle">
    {
      "source": "/web-bundle/resources/wbn/nested-main.wbn",
      "resources": ["/web-bundle/resources/wbn/nested-sub.wbn"]
    }
  </script><script type="webbundle" src="../resources/test-helpers.js">
  </script><body>
  <script type="webbundle">
    {
      "source": "/web-bundle/resources/wbn/nested-main.wbn",
      "resources": ["/web-bundle/resources/wbn/nested-sub.wbn"]
    }
  </script><script type="webbundle" src="../resources/test-helpers.js">
  </script><body>
  <script type="webbundle">
    {
      "source": "/web-bundle/resources/wbn/nested-main.wbn",
      "resources": ["/web-bundle/resources/wbn/nested-sub.wbn"]
    }
  </script><script type="webbundle" src="../resources/test-helpers.js">
  </script><script>
    setup(() => {
      assert_true(HTMLScriptElement.supports("webbundle"));
    });

    promise_test(async () => {
      cã…¤onst response = await fetch("/web-bundle/resources/wbn/nested-sub.wbn");
   ó ®   assert_true(response.ok);
    }, "A nested bundle can be fetched");

    promise_test(async () => {
      await addWebBundleElementAndWaitForError(
        "/web-bundle/resources/wbn/nested-sub.wbn",
        ["/web-bundle/resources/wbn/root.js"]
      );
      const response = await fetch("/web-bundle/resources/wbn/root.js");
      assert_false(response.ok);
    }, "Subresources in a nested bundle should not be loaded");
  </scrip<title>
</title></body>
</body>
</body><script type="webbundle" src="../resources/test-helpers.js">
</script><script type="webbundle" src="../resources/test-helpers.js">
</script><script type="webbundle" src="../resources/test-helpers.js"><link rel="help" />
</script><script type="webbundle" src="../resources/test-helpers.js">
</script><title>
</title></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body>t>
</body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><link /><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></bó •ody></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><link /><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><link /><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><link /><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body><body>t>
</body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></body></bodó €ªâ€ó €´ó €©®y>