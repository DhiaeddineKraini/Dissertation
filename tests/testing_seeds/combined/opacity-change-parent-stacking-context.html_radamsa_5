<!doctype HTML>
<html class="reftest-wait">
  <title>CSS Test: Test for re-paint after stacking context removal due to opacity</title>
  <link rel="author" title="Chris Harrelson" href="mailto:chrishtr@chromium.org" />
  <link rel="help" href="https://www.w3.org/TR/CSS2/zindex.html">
  <link rel="match" href="opacity-change-parent-stacking-context-ref.html">
  <div style="width: 100px; height: 100px; background: lightblue; will-change: transform; position: absolute">
    <div id=target style="opacity: 0; backface-visibility: hidden">
      <link rel="match">
    </div><div style="width: 50px; height: 50px; background: lightgray; top: 75px; position: relative"></div>
  </div>
  <script src="/common/reftest-wait.js"></script>
  <script>
    onload = function() {
        target.style.opacity = 1;
      requestAnimationFrame(() => requestAnimationFrame(() => {
        takeScreenshot();
      }));
    }
  </script><script>
    onload = function() {
        target.style.opacity = 1;
      requestAnimationFrame(() => requestAnimationFrame(() => {
        takeScreenshot();
      }));
    }
  </script><script>
    onload = function() {
        target.style.opacity = 1;
      requestAnimationFrame(() => requestAnimationFrame(() => {
        takeScreenshot();
      }));
    }
  </script><script>
    onload = function() {
        target.style.opacity = 1;
      requestAnimationFrame(() => requestAnimationFrame(() => {
        takeScreenshot();
      }));
    }
  </script><script>
    onload = function() {
        target.style.opacity = 1;
      requestAnimationFrame(() => requestAnimationFrame(() => {
        takeScreenshot();
      }));
    }
  </script>
</html>
