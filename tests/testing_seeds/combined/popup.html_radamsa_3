<!DOCTYPE html>
<script>
window.onload = async () => {
  try {
    if (!document.hasFocus()) {
      const input = document.getElementById("input");
      input.focus();
      await new Promise(r => input.onfocus = r);
    }
    opener.postMessage(`focus = ${document.hasFocus()}`, "*");
  } catch(e) {
    opener.postMessage(`${e.name}: $(e.message)`, "*");
  }
};
</script><script>
window.onload = async () => {
  try {
    if (!document.hasFocus()) {
      const input = document.getElementById("input");
      input.focus();
      await new Promise(r => input.onfocus = r);
    }
    opener.postMessage(`focus = ${document.hasFocus()}`, "*");
  } catch(e) {
    opener.postMessage(`${e.name}: $(e.message)`, "*");
  }
};
</script>
Popup <input id="input">
<meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8">
</html>
