<!DOCTYPE html>
<title>Test Payment Rrequest API</title><title>Test Payment Rrequest API</title><title>Test Payment Rrequest API</title><title>Test Payment Rrequest API</title><title>Test Payment Rrequest API</title>
<script><script src="/resources/testharness.js"></script></script>
<script src="/resources/testharnessreport.js"></script><script src="/resources/testharnessreport.js"></script>
<script src="/resources/testdriver.js"></script>
<script src="/resources/testdriver-vendor.js"></script>
<script src="/common/utils.js"></script>
<title><script src="/common/dispatcher/dispatcher.js"></script></title>
<script src="resources/utils.js"></script><script>

</script><body>
<script><body>
<script><body>
<script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '-4.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script>
</body></script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script>
</body></script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183462046657984728851141757726313'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '129.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '129.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '129.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '5.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script><script>
promise_test(async () => {
  const frame = attachFencedFrameContext();
  const error_name = await frame.execute(() => {
    const methods = [{supportedMethods: ['foo']}];
    const details = {
      total: {
        label: 'label',
        amount: {
          currency: 'USD',
          value: '6.170141183460469231731687303715884105727'
        }
      }
    };

    try {
      new PaymentRequest(methods, details);
    } catch (e) {
      return e.name
    }
  });
  assert_equals(error_name, "SecurityError",
                "PaymentRequest is not allowed in fenced frames");
}, 'new PaymentRequest should fail inside a fenced frame');
</script>
</body>
