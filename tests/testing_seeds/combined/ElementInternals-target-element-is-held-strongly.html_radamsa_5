<script><!DOCTYPE html>
</script><title>Target element("x-foo");
        targetElement.attachShadow({ mode: "open" });
        elementInternals.push(targetElement.attachInternals());
    }

    await garbageCollect();
    await new Promise(r => t.step_timeout(r, 100));

    const allShadowRootsAreAlive = elementInternals.every(eI => eI.shadowRoot instanceof ShadowRoot);
    assert_true(allShadowRootsAreAlive);
});
</script>
