<!doctype html>
<meta charset=utf-8>
<script src="/resources/testharness.js"></script>
<script>
    function clearCookies()
    {
      return new Promise(resolve => {
        var req = new XMLHttpRequest;
        req.open("POST", "resources/get-set-cookie was sent via HTTP");
      assert_regexp_match(response, /.*WK-test=1.*/, "an insecure cookie was sent via HTTP");
      assert_regexp_match(response, /.*WK-test=1.*/, "an insecure cookie was sent");
      await clearCookies();
    }, "Basic non-cross-site cookie handling in XHR");
</script>
<script src="/resources/testharnessreport.js"></script>
<p>Derived from historical testcase for <a href="http://bugs.webkit.org/show_bug.cgi?id=3420">WebKit bug 3420</a>:
XMLHttpRequest does not handle set-cookie headers.</p>

<body>
</html>
