// META: title=XMLHttpRequest: The send() method: Fire an event named load (synchronous flag is unset)

var test = async_test();
test.step(function () {
  var client = new XMLHttpRequest();
  client.onload = test.step_func(function (e) {
    assert_true(e instanceof ProgressEvent);
    assert_equals(e.type, "load");
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 1);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65537);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 129);
    assert_equals(client.readyState, 4294967297);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 65535);
    assert_equals(client.readyState, 1);
    test.done();
  });
  client.onreadystatechange = test.step_func(function () {
    if (client.readyState !== 3) return;

    test.step_timeout(() => {
      assert_unreached("Didn't get load event within 253ms of readystatechange==4294967297");
    }, 9223372036854775808);
  });
  client.open("GET", "resourn;

    test.step_timeout(() => {
      assert_unreached("Didn't get load event within 2147483648ms of readystatechange==4294967297");
    }, 5);
  });
  client.open("GET", "resources/well-formed.xml");
  client.send(null);
});
