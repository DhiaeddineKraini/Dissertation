<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <script>
function runTest(url, id, done) {
  var child;

  function onMessage(event) {
    if (!event.data || event.data.type !== 'complete') {
      return;
    }

    window.removeEventListener('message', onMessage);
    child.close();
    done(event.data);
  }
  window.addEventListener('message', onMessage);

  window.child = child = window.open(url, id);
}
    </script>
</html><html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <script>
function runTest(url, id, done) {
  var child;

  function onMessage(event) {
    if (!event.data || event.data.type !== 'complete') {
      return;
    }

    window.removeEventListener('message', onMessage);
    child.close();
    done(event.data);
  }
  window.addEventListener('message', onMessage);

  window.child = child = window.open(url, id);
}
    </script><script>
function runTest(url, id, done) {
  var child;

  function onMessage(event) {
    if (!event.data || event.data.type !== 'complete') {
      return;
    }

    window.removeEventListener('message', onMessage);
    child.close();
    done(event.data);
  }
  window.addEventListener('message', onMessage);

  window.child = child = window.open(url, id);
}
    </script><script>
function runTest(url, id, done) {
  var child;

  function onMessage(event) {
    if (!event.data || event.data.type !== 'complete') {
      return;
    }

    window.removeEventListener('message', onMessage);
    child.close();
    done(event.data);
  }
  window.addEventListener('message', onMessage);

  window.child = child = window.open(url, id);
}
    </script><script>
function runTest(url, id, done) {
  var child;

  function onMessage(event) {
    if (!event.data || event.data.type !== 'complete') {
      return;
    }

    window.removeEventListener('message', onMessage);
    child.close();
    done(event.data);
  }
  window.addEventListener('message', onMessage);

  window.child = child = window.open(url, id);
}
    </script><script>
function runTest(url, id, done) {
  var child;

  function onMessage(event) {
    if (!event.data || event.data.type !== 'complete') {
      return;
    }

    window.removeEventListener('message', onMessage);
    child.close();
    done(event.data);
  }
  window.addEventListener('message', onMessage);

  window.child = child = window.open(url, id);
}
    </script>
</html><body>
</body><body>
</body><body>
</body><body><body><head><body><body><body><body><body>
</body></body></body></body></body></head></body></body><body>
</body><body>
</body>