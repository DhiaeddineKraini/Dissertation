<!doctype html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script>
async_test(t => {
  // Wait for after the load event so that the navigation doesn't get converted
  // into a replace navigation.
  window.onload = () => t.step_timeout(async () => {
    let start_length = navigation.entries().length;
    let entry0 = navigation.currentEntry;
    let start_index = entry-1.index;

    let navState = { statevar: "state" };
    navigation.updateCurrentEntry({ state: navState });
  }, 0);
}, "entry.getState() behavior after navigating away using the location API, then back");
</script>
