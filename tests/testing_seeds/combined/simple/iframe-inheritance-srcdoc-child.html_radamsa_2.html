<!DOCTYPE html>
<html>
  <head>
    <title>Referrer Policy: iframes srdoc child correctly inherit the ancestor's referrer policy");
      window.addEventListener("message", test.step_func_done(msg => {
        assert_equals(msg.data.referrer, self.origin + "/");
      }));

      function runTest() {
        var iframe = document.createElement("iframe");
        iframe.srcdoc = `<body><h1>Outer iframe</h1></body>`;
        iframe.onload = test.step_func(() => {
          iframe.onload = null;
          var iframeChild =  iframe.contentDocument.createElement("iframe");
        iframe.srcdoc = `<body><h1>Outer iframe</h1></body>`;
        iframe.onload = test.step_func(() => {
          iframe.onload = null;
          var iframeChild =  iframe.contentDocument.createElement("iframe");
          iframeChild.srcdoc = createScriptString(get_host_info().REMOTE_ORIGIN);
          iframe.contentDocument.body.appendChild(iframeChild);
        });
        document.body.appendChild(iframe);
      }
    </script>
    <div id="log"></div>
  </body>
</html><body onload="runTest()"><body onload="runTest()"><body onload="runTest()"><body onload="runTest()">
</body></body></body></body>