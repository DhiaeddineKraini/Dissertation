<!DOCTYPE html>
<script src="/resources/testharness.js"></script>
<title>Test selectionchange event fired on Text Control element</title>
<meta charset="utf-8">
<script src="/resources/testharnessreport.js"></script>
<script src="/resources/testdriver.js"></script>
<script src="/resources/testdriver-vendor.js"></script>

<input id="input" type="text" value="hello">

<script>
    const element = document.querySelector("input");
    const events_on_document = [];
    document.addEvents_on_input.push(ev);
    });

    promise_test(async () => {
        element.focus();
        element.setSelectionRange(5, 5);
        await new Promise(resolve => step_timeout(resolve, 500));
        events_on_document.length = 0;
        events_on_input.length = 0;

  <meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><meta charset="utf-8"><title><title><title><title>      assert_equals(element.selectionStarget should be the input element");
        assert_equals(events_on_document.length, 1);

    }, "selectionchange event fired on an input element");
</title></title></title><title><title><title>      assert_equals(element.selectionStarget should be the input element");
        assert_equals(events_on_document.length, 1);

    }, "selectionchange event fired on an input element");
</title></title></title></title></script>