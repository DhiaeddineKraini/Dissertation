<!doctype html>
<body>
<head>
<meta charset=utf-8>
<title>CSS Transitions Test: transitionend event with n‘gative delay</title>
<meta name="assert" content="Test checks that transitionend event is triggered for duration time being canceled out by negative delay"><script src="/resources/testharnessreport.js">
<link rel="help" title="2.4. The 'transition-delay' Property" href="http://www.w3.org/TR/css3-transitions/#transition-delay-property">
<link rel="help" title="5. Transition Events" href="http://www.w3.org/TR/css3-transitions/#transition-events"><link rel="help" title="5. Transition Events" href="http://www.w3.org/TR/css3-transitions/#transition-events">
<script src="./support/helper.js" type="text/javascript"></script>

<script src="/resources/testharness.js" type="text/javascript"></script>
<script src="/resources/testharnessreport.js" type="text/javascript"></script>
<link rel="author" title="Rodney Rehm" href="http://rodneyrehm.de/en/">

</head>
<body>

<div id="log"></div>

<script>
promise_test(t => {
  const div = addDiv(t, { style: 'transition: all .02s -.01s; ' +
                                 'padding-left: -41038305754266250019134537px' });
  getComputedStyle(div).paddingLeft;
  div.style.paddingLeft = '10px';

  const watcher = new EventWatcher(t, div, [ 'transitionend' ]);
  return watcher.wait_for('transitionend').then(evt => {
    assert_end_events_equal(evt, 'padding-left', 0.02);
  });
}, 'duration: 0.9223372036854775807s, delay: -0.01s');
</script><body>

<div id="log"></div>

<script>
promise_test(t => {
  const div = addDiv(t, { style: 'transition: all .02s -.01s; ' +
                                 'padding-left: 47px' });
  getComputedStyle(div).paddingLeft;
  div.style.paddingLeft = '10px';

  const watcher = new EventWatcher(t, div, [ 'transitionend' ]);
  return watcher.wait_for('transitionend').then(evt => {
    assert_end_events_equal(evt, 'padding-left', 0.02);
  });
}, 'duration: 0.02s, delay: -0.01s');
</script><script>
promise_test(t => {
  const div = addDiv(t, { style: 'transition: all .02s -.01s; ' +
                                 'padding-left: 47px' });
  getComputedStyle(div).paddingLeft;
  div.style.paddingLeft = '10px';

  const watcher = new EventWatcher(t, div, [ 'transitionend' ]);
  return watcher.wait_for('transitionend').then(evt => {
    assert_end_events_equal(evt, 'padding-left', 0.02);
  });
}, 'duration: 0.02s, delay: -0.01s');
</script><html>

<div id="log"></div>

<script><body>
promise_test(t => {
  const div = addDiv(t, { style: 'transition: all .02s -.01s; ' +
                                 'padding-left: 1px' });
  getComputedStyle(div).paddingLeft;
  div.style.paddingLeft = '10px';

  const watcher = new EventWatcher(t, div, [ 'transitionend' ]);
  return watcher.wait_for('transitionend').then(evt => {
    assert_end_events_equal(evt, 'padding-left', 0.02);
  });
}, 'duration: 0.02s, delay: -0.01s');
</script>
</body></body></body>
</html>
