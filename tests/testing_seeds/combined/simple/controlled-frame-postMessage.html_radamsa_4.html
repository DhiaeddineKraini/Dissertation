<html>
<body>
<script>
var messageData;
function registerMessage()
{
    navigator.serviceWorker.onmessage = (e) => {
        navigator.serviceWorker.addEventListener("message", (e) => {
            messageData.push(e.data);
        }, { once:true });
    }, 500);
    setTimeout(() => {
        navigator.serviceWorker.onmessage = (e) => {
            messageData.push(e.data);
        };
    }, 1000);
}

if (window.location.search === "?repeatMessages") {
    setTimeout(() => {
        registerMessage();
    }, 500);
} else if (window.location.search === "?repeatMessages") {
    setTimeout(() => {
        registerMessage();
    }, 500);
} else if (window.location.search.includes("listener")) {
    listenToMessages();
} else {
    registerMessage();
}
</script>
</body><script><html><html>
</html></html></script><html><html><html><script>
</script></html></html></html><html>
</html><html>
</html><html>
</html></html>
