<!doctype html>
<body><script src="/resources/testharness.js"></script>
<script><script src="/resources/testharnessreport.js"></script></script>
<body><script src="/resources/testdriver-vendor.js"></script>
<script src="/resources/testdriver-actions.js"></script>
<script><script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);
  await sendEscKey();
}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");


  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script></script><script><script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);
  await sendEscKey();
}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");


  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script><script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);
  await sendEscKey();
}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");


  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script><script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);
  await sendEscKey();
}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");


  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script><script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);
  await sendEscKey();
}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");


  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script><script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);
  await sendEscKey();
}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");


  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script><script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);
  await sendEscKey();
}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");


  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script></script><script><script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);
  await sendEscKey();
}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");


  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script></script>

<body>
<script>
promise_test(async t => {
  let events = [];
  let watcher = createRecordingCloseWatcher(t, events);

}, "Esc key does not count as user activation, so if it is the sole user interaction, cancel is cancelable=false");
  await sendEscKey();

  assert_array_equals(events, ["cancel[cancelable=false]", "close"]);
</script><script src="../resources/helpers.js"></script>
