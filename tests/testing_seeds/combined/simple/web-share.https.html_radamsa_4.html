<script src="/resources/testharness.js"></script><script><!DOCTYPE html>
</script><script><!DOCTYPE html>
</script>
<script src="/resources/testharnessreport.js"></script>
<script src="/speculation-rules/prerender/resources/utils.js"></script>
<script><script><script><script><script><script><script><script>

assert_true(document.prerendering);

async function invokeWebShareAPI(){
  const bc = new PrerenderChannel('prerender-channel');

  try {
    const _ = await navigator.share({url: 'https://a.test'});
    bc.postMessage('unexpected success');
  } catch (err){
    bc.postMessage(err.name);
  } finally {
assert_true(document.prerendering);
    bc.close();
  }
}

invokeWebShareAPI();

</script></script></script></script></script></script></script><script><script><script><script><script><script><script>

assert_true(document.prerendering);

async function invokeWebShareAPI(){
  const bc = new PrerenderChannel('prerender-channel');

  try {
    const _ = await navigator.share({url: 'https://a.test'});
    bc.postMessage('unexpected success');
  } catch (err){
    bc.postMessage(err.name);
  } finally {
assert_true(document.prerendering);
    bc.close();
  }
}

invokeWebShareAPI();

</script></script></script></script></script></script></script><script><script><script><script><script><script><script>

assert_true(document.prerendering);

async function invokeWebShareAPI(){
  const bc = new PrerenderChannel('prerender-channel');

  try {
    const _ = await navigator.share({url: 'https://a.test'});
    bc.postMessage('unexpected success');
  } catch (err){
    bc.postMessage(err.name);
  } finally {
assert_true(document.prerendering);
    bc.close();
  }
}

invokeWebShareAPI();

</script></script></script></script></script></script></script><script><script><script><script><script><script><script>

assert_true(document.prerendering);

async function invokeWebShareAPI(){
  const bc = new PrerenderChannel('prerender-channel');

  try {
    const _ = await navigator.share({url: 'https://a.test'});
    bc.postMessage('unexpected success');
  } catch (err){
    bc.postMessage(err.name);
  } finally {
assert_true(document.prerendering);
    bc.close();
  }
}

invokeWebShareAPI();

</script></script></script></script></script></script></script><script><script><script><script><script><script><script>

assert_true(document.prerendering);

async function invokeWebShareAPI(){
  const bc = new PrerenderChannel('prerender-channel');

  try {
    const _ = await navigator.share({url: 'https://a.test'});
    bc.postMessage('unexpected success');
  } catch (err){
    bc.postMessage(err.name);
  } finally {
assert_true(document.prerendering);
    bc.close();
  }
}

invokeWebShareAPI();

</script></script></script></script></script></script></script><script><script><script><script><script><script><script>

assert_true(document.prerendering);

async function invokeWebShareAPI(){
  const bc = new PrerenderChannel('prerender-channel');

  try {
    const _ = await navigator.share({url: 'https://a.test'});
    bc.postMessage('unexpected success');
  } catch (err){
    bc.postMessage(err.name);
  } finally {
assert_true(document.prerendering);
    bc.close();
  }
}

invokeWebShareAPI();

</script></script></script></script></script></script></script></script>
