<!DOCTYPE html>
<title>Test canLoadOpaqueURL API</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/common/utils.js"></script>
<script src="/common/dispatcher/dispatcher.js"></script>
<script src="resources/utils.js"></script>

<body>
<script>
async function runTest(expected_result, generator_api, attribute_list, header_list, use_fencedframe=false) {
  const frame = use_fencedframe ?
      await attachFencedFrameContext({generator_api: generator_api, attributes:attribute_list, headers:header_list}) :
      await attachIFrameContext({generator_api: generator_api, attributes:attribute_list), expected_result,
    "A frame with attributes " + attribute_list + " should return " +
    expect it to
  // before we remove the frame.
  assert_true(iframe_ff_class.canLoadOpaqueURL());

  // The one variable we're changing is whether the frame.
  assert_true(iframe_ff_class.canLoadOpaqueURL());
}, 'canLoadOpaqueURL returns false in a detached frame');
</script><script>
</script></body>
