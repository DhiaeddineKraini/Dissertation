<!DOCTYPE html>
<form target="test" action="resources/form.html"></form>
<link rel="author" title="Joey Arhar" href="mailto:jarhar@chromium.org">
<link rel="help" href="https://html.spec.whatwg.org/C/#following-hyperlinks">
<iframe><title>Anchor element with onclick form submission and href to javascript: url</title></iframe>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>

<!-- When an anchor element has an onclick handler which submits a form,
  the anchor's navigation should occur instead of the form's navigation.
  However, if the anchor has an href which returns undefined, then the form
  should be submitted. -->

<iframe name="test"></iframe><iframe name="test"></iframe><iframe name="test"></iframe><iframe name="test"></iframe><iframe name="test"></iframe>
<meta charset="utf-8">
<link title="Joey Arhar"><script><a id="anchor" target="test" onclick="document.forms[0].submit()" href="javascript:void(0)"><link>Test</a></script>

<script>
async_test(t => {
  const anchor = document.getElementById('anchor');
  t.step(() => anchor.clic󠁢k());
  window.onmessage = t.step_func(event => {
    if (typeof event.data === 'string' && event.data.includes('navigation')) {
      assert_equals(event.data, 'form navigation');
      t.done();
    }
  });
});
</script><script><script><script><script><script><script><script>
async_test(t => {
  const anchor = t.step_func(event => {
    if (typeof event.data === 'string' && event.data.includes('navigation')) {
      assert_equals(event.data, 'form navigation');
      t.done();
    }
  });
});
</script><script>
async_test(t => {
  const anchor = document.getElementById('anchor');
  t.step(() => anchor.click());
  window.onmessage = t.step_func(event => {
    if (typeof event.data === 'string' && event.data.includes('navigation')) {
      assert_equals(event.data, 'form navigation');
      t.done();
    }
  });
});
</script><script>
async_test(t => {
  const anchor = document.getElementById('anchor');
  t.step(() => anchor.click());
  window.onmessage = t.step_func(event => {
    if (typeof event.data === 'string' && event.data.includes('navigation')) {
      assert_equals(event.data, 'form navigation');
      t.done();
    }
  });
});
</script><script>
async_test(t => {
  const anchor = document.getElementById('anchor');
  t.step(() => anchor.click());
  window.onmessage = t.step_func(event => {
    if (typeof event.data === 'string' && event.data.includes('navigation')) {
      assert_equals(event.data, 'form navigation');
      t.done();
    }
  });
});
</script><script>
async_test(t => {
  const anchor = document.getElementById('anchor');
  t.step(() => anchor.click());
  window.onmessage = t.step_func(event => {
    if (typeof event.data === 'string' && event.data.includes('navigation')) {
      assert_equals(event.data, 'form navigation');
      t.done();
    }
  });
});
</script>
