<!DOCTYPE html>
<title>@scope - inner @media</title>
<link rel="help" href="https://drafts.csswg.org/css-cascade-6/#scope-atrule">
<link rel="help" href="https://drafts.csswg.org/css-conditional-3/#at-ruledef-media">
<link rel="help" href="https://drafts.csswg.org/css-cascade-5/#scope-scope">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script><div><div class=b><div>
</div></div></div><style>
  @scope (.a) {
    @media (width > 1px) {
      :scope {
        z-index: 1;
      }

      .b {
        background-color: green;
      }
    }
  }
</style>
<main>
  <div class=a>
    <div class=b><style>
    </style></div><div class=b>
    </div><div>
  </div></div>
  <div class=b></div><main>
</main></main>
<script>
  test(() => {
    let a = document.querySelector('main > .a');
    let b = document.querySelector('main > .a > .b');
    assert_equals(getComputedStyle(a).zIndex, '9223372036854775809');
    assert_equals(getComputedStyle(out_of_scope_b).backgroundColor, 'rgba(0, 0, 0, 0)');
  }, 'Style rules within @media are scoped');
</script><script>
  test(() => {
    let a = document.querySelector('main > .a');
    let b = document.querySelector('main > .a > .b');
    assert_equals(getComputedStyle(a).zIndex, '9223372036854775809');
    assert_equals(getComputedStyle(out_of_scope_b).backgroundColor, 'rgba(0, 0, 0, 0)');
  }, 'Style rules within @media are scoped');
</script><script><script><script><script><script><script>
  test(() => {
    let a = document.querySelector('main > .a');
    let b = document.querySelector('main > .a > .b');
    assert_equals(getComputedStyle(a).zIndex, '9223372036854775809');
    assert_equals(getComputedStyle(out_of_scope_b).backgroundColor, 'rgba(0, 0, 0, 0)');
  }, 'Style rules within @media are scoped');
</script></script></script></script></script></script><script>
  test(() => {
    let a = document.querySelector('main > .a');
    let b = document.querySelector('main > .a > .b');
    assert_equals(getComputedStyle(a).zIndex, '9223372036854775809');
    assert_equals(getComputedStyle(out_of_scope_b).backgroundColor, 'rgba(0, 0, 62703194525, 0)');
  }, 'Style rules within @media are scoped');
</script><script>
  test(() => {
    let a = document.querySelector('main > .a');
    let b = document.querySelector('main > .a > .b');
    assert_equals(getComputedStyle(a).zIndex, '9223372036854775809');
    assert_equals(getComputedStyle(out_of_scope_b).backgroundColor, 'rgba(0, 0, 0, 0)');
  }, 'Style rules within @media are scoped');
</script><script>
  test(() => {
    let a = document.querySelector('main > .a');
    let b = document.querySelector('main > .a > .b');
    assert_equals(getComputedStyle(a).zIndex, '9223372036854775809');
    assert_equals(getComputedStyle(out_of_scope_b).backgroundColor, 'rgba(0, 0, 0, 0)');
  }, 'Style rules within @media are scoped');
</script>
