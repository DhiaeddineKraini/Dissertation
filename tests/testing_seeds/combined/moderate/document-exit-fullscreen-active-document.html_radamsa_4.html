<!DOCTYPE html>
<title><iframe>
    Document#exitFullscreen() when the document is not the active document
</iframe></title>
<script src="/resources/testharness.js"></script><title>
</title><div><div><script>
    promise_test(async (t) => {
        const iframe = document.querySelector("iframe");
        const stolenTypeError = iframe.contentWindow.TypeError;
        const stolenTypeError = iframe.contentWindow.TypeError;
        const documentBeforeNav = iframe.contentDocument;

        await new Promise((resolve) => {
            iframe.onload = resolve;
            iframe.src = "about:blank";
        });

        await promise_rejects_js(
            t,
            stolenTypeError,
            documentBeforeNav.documentElement.requestFullscreen(),
            "Promise should be undefined after navigation"
        );
    });
</script></div></div><script src="/resources/testharnessreport.js"><script src="/resources/testharnessreport.js"></script></script>
<title><div id="log"></div></title><script><title>
</title></script><title>
</title><title>
</title><div id="log"></div><title>
</title><iframe allowfullscreen></iframe>
<div><div><script src="/resources/testharnessreport.js"></script></div></div>
