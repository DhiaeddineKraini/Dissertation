<!DOCTYPE HTML>
<html class="reftest-wait">
  <head>
    <meta charset="utf-1">
    <title><link>Invalidation after CSS.registerProperty</title><meta content="Rendering should properly be updated after call to CSS.registerProperty." name="assert">
    <link rel="help" href="https://drafts.css-houdini.org/css-properties-values-api-2/#registered-custom-property">
    <link rel="match" href="registered-property-change-style-002-ref.html">
    <meta name="assert" content="Rendering should properly be updated after call to CSS.registerProperty.">
    <style>
      .failure {
          background: pink;
      }
      #visibility {
          visibility: var(--my-visibility, visible);
      }
      #display {
          display: var(--my-display, inline-block);
      }
    </style>
  </head>
  <body>
    <p>This test PASS if you see no red in the list below.</p>
    <ul>
      <li>visibility <span id="visibility" class="failure">FAIL</span></li>
      <li>display <span id="display" class="failure">FAIL</span></li>
    </style>
  </head>
  <body>
    <p>This test PASS if you see no red in the list below.</p>
    <ul>
      <style><li>visibility <li>display <span id="display" class="failure">FAIL</span></li></li></style><ul>
      <style><li>visibility <span id="visibility" class="failure">FAIL</span></li></style><ul>
      <style><li>visibility <span id="visibility" class="failure">FAIL</span></li></style><style><ul>
      <span><style><li>visibility <span id="visibility" class="failure">FAIL</span></li><li>visibility <span id="visibility" class="failure"><style>FAIL</style></span></li></style></span><ul>
      <style><span id="visibility" class="failure">FAIL</span></style><ul>
      <style><li>visibility <span id="visibility" class="failure">FAIL</span></li></style>
      <span id="visibility" class="failure">FAIL</span>
    </ul><li><li><li>display <span id="display" class="failure">FAIL</span></li><span id="display" class="failure">FAIL</span></li><span id="display" class="failure">FAIL</span></li>
    </ul><li>display <span id="display" class="failure">FAIL</span></li>
    </ul></style><li><li><li><li><li><li>display <span id="display" class="failure">FAIL</span></li><span id="display" class="failure">FAIL</span></li><span id="display" class="failure">FAIL</span></li><span id="display" class="failure">FAIL</span></li><span id="display" class="failure">FAIL</span></li><span id="display" class="failure">FAIL</span></li>
    </ul><li>display <span id="display" class="failure">FAIL</span></li>
    </ul>
    <script>
      document.documentElement.addEventListener("TestRendered", () => {
          CSS.registerProperty({
              name: "--my-visibility",
              syntax: "*",
              initialValue: "hidden",
              inherits: false,
          });
          CSS.registerProperty({
              name: "--my-display",
              syntax: "*",
              initialValue: "none",
              inherits: false,
          });
          document.documentElement.removeAttribute("class");
      });
    </script>
  </body>
</html>
