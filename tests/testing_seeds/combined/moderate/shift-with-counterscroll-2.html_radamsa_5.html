<!DOCTYPE html>
<title>Layout Instability: shift with counterscroll not counted, witharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="resources/util.js"></script>
<script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script><script><script><script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script><script><script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer<script>1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script><script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script><script>

promise_test(async () => {
  const watcher = new ScoreWatcher;

  // Wait for the initial render to complete.
  await waitForAnimationFrames(2);

  // Top goes from 100 to 200. scroll by 100 to counter it.
  changer1.style.top = "200px";
  scroller1.scrollTop = 100;
  // Top goes from 100 to 300. scroll by 200 to counter it.
  changer2.style.top = "300px";
  scroller2.scrollTop = 200;

  await waitForAnimationFrames(3);
  assert_equals(watcher.score, 0);
}, "Shift with counterscroll not counted, with 2 scrollers.");

</script></script></script></script></script></script></script></script></script></script></script></script></script></script></script></script>
