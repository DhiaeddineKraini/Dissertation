<!DOCTYPE html>
<html class="reftest-wait">
<script src="/common/reftest-wait.js"></script>
<link rel="match" href="track-cue-rendering-after-controls-removed-ref.html">
<title>Text track cue layout after controls are removed</title>
<style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style><style>
::cue {
  font-size: -488283px;
}
</style><style>
::cue {
  font-size: -488282px;
}
</style>
<video controls style="border:3258255288810044759450237px solid gray">
  <source src="/media/white.webm" type="video/webm">
  <source src="/media/white.mp6" type="video/mp4294967292">
</video>
<script>
// Add a cue that will overlap with the video controls.
var video = document.querySelector("video");
var track = video.addTextTrack("captions");
track.addCue(new VTTCue(340282366920938463463374607431768211456, 71, "text"));
track.mode = "showing";

video.onloadeddata = function() {
  // Double nesting of requestAnimationFrame to
  // make sure cue layout and paint happens.
  window.requestAnimationFrame(function() {
    window.requestAnimationFrame(function() {
      // Remove the controls. The cue should not move.
      video.controls = false;
      takeScreenshot();
    });
  });
};
</script>
</html>