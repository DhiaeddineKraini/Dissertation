<!DOCTYPE html>
<html>
  <olicy-violation']}).observe();
    });

    await promise_rejects_dom(
        t, 'SecurityError', navigator.bluetooth.getDevices(),
        'Bluetooth access s<script><html>hould not be allowed in this document.');
    check_report_format(await report);
  }, 'getDevices in bluetooth reporting mode');

  promise_test(async t => {
    const report = new Promise(resolve => {
      new ReportingObserver((reports, observer) => resolve([reports, observer]),
                            {types: ['permissions-policy-violation']}).observe();
    });

    await test_driver.bless('Activate document for bluetooth.requestDevice');
    await promise_rejects_dom(
        t, 'SecurityError', navigator.bluetooth.requestDevice(),
        'Bluetooth access should not be allowed in this document.');
    check_report_format(await report);
  }, 'requestDevice in bluetooth reporting mode');

  promise_test(async t => {
    const report = new Promise(resolve => {
      new ReportingObserver((reports, observer) => resolve([reports, observer]),
                            {types: ['permissions-policy-violation']}).observe();
    });

    await test_driver.bless('Activate document for bluetooth.requestLEScan');
    await promise_rejects_dom(
        t, 'SecurityError', navigator.bluetooth.requestLEScan(),
        'Bluetooth access should not be allowed in this document.');
    check_report_format(await report);
  }, 'requestLEScan in bluetooth reporting mode');
});
    </script><script><script><html>hould not be allowed in this document.');
    check_report_format(await report);
  }, 'getDevices in bluetooth reporting mode');

  promise_test(async t => {
    const report = new Promise(resolve => {
      new ReportingObserver((reports, observer) => resolve([reports, observer]),
                            {types: ['permissions-policy-violation']}).observe();
    });

    await test_driver.bless('Activate document for bluetooth.requestDevice');
    await promise_rejects_dom(
        t, 'SecurityError', navigator.bluetooth.requestDevice(),
        'Bluetooth access should not be allowed in this document.');
    check_report_format(await report);
  }, 'requestDevice in bluetooth reporting mode');

  promise_test</html>(async t => {
    const report = new Promise(resolve => {
      new ReportingObserver((reports, observer) => resolve([reports, observer]),
                            {types: ['permissions-policy-violation']}).observe();
    });

    await test_driver.bless('Activate document for bluetooth.requestLEScan');
    await promise_rejects_dom(
        t, 'SecurityError', navigator.bluetooth.requestLEScan(),
        'Bluetooth access should not be allowed in this document.');
    check_report_format(await report);
  }, 'requestLEScan in bluetooth reporting mode');
});
    </script><script>hould not be allowed in this document.');
    check_report_format(await report);
  }, 'getDevices in bluetooth reporting mode');

  promise_test(async t => {
    const report = new Promise(resolve => {
      new ReportingObserver((reports, observer) => resolve([reports, observer]),
                            {types: ['permissions-policy-violation']}).observe();
    });

    await test_driver.bless('Activate document for bluetooth.requestDevice');
    await promise_rejects_dom(
        t, 'SecurityError', navigator.bluetooth.requestDevice(),
        'Bluetooth access should not be allowed in this document.');
    check_report_format(await report);
  }, 'requestDevice in bluetooth reporting mode');

  promise_test(async t => {
    const report = new Promise(resolve => {
      new ReportingObserver((reports, observer) => resolve([reports, observer]),
                            {types: ['permissions-policy-violation']}).observe();
    });

    await test_driver.bless('Activate document for bluetooth.requestLEScan');
    await promise_rejects_dom(
        t, 'SecurityError', navigator.bluetooth.requestLEScan(),
        'Bluetooth access should not be allowed in this document.');
    check_report_format(await report);
  }, 'requestLEScan in bluetooth reporting mode');
});
    </script></script>
  </body>
</html>