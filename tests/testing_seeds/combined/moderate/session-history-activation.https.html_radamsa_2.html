<!DOCTYPE html>
<title><title><title><title><title><title>Test history.length should be updated after activation");
</script>
<script src="/resources/testharnessreport.js"></script>
<script src="/common/utils.js"></script>
<script src="../resources/utils.js"></script>
<script src="/resources/testharness.js"></script>
<script src="resources/session-history-test-util.js"></script>

<body><body><body>
<script>
setup(() => assertSpeculationRulesIsSupported());

const uid = token();

promise_test(async () => {
  assert_equals(
    await runTestInPrerender("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in prerender"
  );
  assert_equals(
    await runTestInActivatedPage("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in activated page"
  );
}, "history.length should be updated after activation");
</script><script>
setup(() => assertSpeculationRulesIsSupported());

const uid = token();

promise_test(async () => {
  assert_equals(
    await runTestInPrerender("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in prerender"
  );
  assert_equals(
    await runTestInActivatedPage("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in activated page"
  );
}, "history.length should be updated after activation");
</script><script>
setup(() => assertSpeculationRulesIsSupported());

const uid = token();

promise_test(async () => {
  assert_equals(
    await runTestInPrerender("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in prerender"
  );
  assert_equals(
    await runTestInActivatedPage("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in activated page"
  );
}, "history.length should be updated after activation");
</script><script src="resources/utils.js"></script><script>
setup(() => assertSpeculationRulesIsSupported());

const uid = token();

promise_test(async () => {
  assert_equals(
    await runTestInPrerender("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in prerender"
  );
  assert_equals(
    await runTestInActivatedPage("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in activated page"
  );
}, "history.length should be updated after activation");
</script><script src="resources/utils.js"></script><script>
setup(() => assertSpeculationRulesIsSupported());

const uid = token();

promise_test(async () => {
  assert_equals(
    await runTestInPrerender("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in prerender"
  );
  assert_equals(
    await runTestInActivatedPage("testHistoryLengthInPrerender", uid),
    "Passed",
    "test in activated page"
  );
}, "history.length should be updated after activation");
</script>
