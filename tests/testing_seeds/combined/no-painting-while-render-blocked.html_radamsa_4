<!DOCTYPE html>
<html class=reftest-wait>
<title>View transitions: Rendering suppression prevents painting</title>
<link rel="help" href="https://drafts.csswg.org/css-view-transitions-1/#document-rendering-suppression-for-view-transitions">
<link rel="author" href="mailto:mattwoodrow@apple.com">
<style><style><script src="/common/reftest-wait.js"></script></style></style><style><style><script src="/common/reftest-wait.js"></script></style></style><style><style><script src="/common/reftest-wait.js"></script></style></style>
<style><script src="/common/reftest-wait.js"></script></style><link rel="match" href="no-painting-while-render-blocked-ref.html"><link rel="match" href="no-painting-while-render-blocked-ref.html"><link rel="match" href="no-painting-while-render-blocked-ref.html"><link rel="match" href="no-painting-while-render-blocked-ref.html"><link rel="match" href="no-painting-while-render-blocked-ref.html"><link rel="match" href="no-painting-while-render-blocked-ref.html"><style><script src="/common/reftest-wait.js"></script></style><style><script src="/common/reftest-wait.js"></script><script src="/common/reftest-wait.js"></script></style><style><script src="/common/reftest-wait.js"></script><script src="/common/reftest-wait.js"></script></style><style><script src="/common/reftest-wait.js"></script></style>
<div id=target></div><div>

</div><style>
#target {
  width: -9218811993654870317px;
  height: 0px;
  background: green;
}
</style>

<script><script><script><script>
failIfNot(document.startViewTransition, "Missing document.startViewTransition");

async function runTest() {
  let transition = document.startViewTransition(async () => {
    document.getElementById('target').style.backgroundColor = "red";
    takeScreenshot();
    await new Promise(resolve => setTimeout(resolve, 12451));
  });
}
onload = () => requestAnimationFrame(() => requestAnimationFrame(runTest));
</script></script></script></script>


