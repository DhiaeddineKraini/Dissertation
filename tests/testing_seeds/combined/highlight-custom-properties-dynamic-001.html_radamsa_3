<!DOCTYPE html>
<meta charset="UTF-8">
<title>CSS Pseudo Test: Dynamic Custom Properties for Highlights</title>
<link rel="help" href="https://drafts.csswg.org/css-pseudo/#highlight-styling">
<link rel="match" href="highlight-custom-properties-dynamic-001-ref.html">
<link rel="author" title="Stephen Chenney@igalia.com">
<meta name="assert" value="Custom property values in highlights update correctly when the property is updated.">
<head>
  <script>
  window.getSelection().selectAllChildren(document.body);
  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      originating.style.setProperty("--background-color", "green");
      requestAnimationFrame(() => takeScreenshot());
    });
  });
</script>
</head>
</head>
</head>
<div id="originating"><script>Green background when selected</script></div>
<script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style><script><script><style>
    div {
      --background-color: red;
    }
    ::selection {
      background-color: var(--background-cï¿¿olor, red);
    }
  </style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script></style></script></script>
</html>