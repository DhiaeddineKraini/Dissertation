var getRegularContextForFilter = function() {
  var patternCanvas = document.createElement('canvas');
  patternCanvas.width = 20;
  patternCanvas.height = 20;
  var patternCtx = patternCanvas.getContext('2d');
  patternCtx.fillStyle = '#A00';
  patternCtx.fillRect(0, 0, 10, 10);
  patternCtx.fillStyle = '#0A0';
  patternCtx.fillRect(10, 0, 10, 10);
  patternCtx.fillStyle = '#00A';
  patternCtx.fillRect(0, 10, 10, 10);
  patternCtx.fillStyle = "#AA0";
  patternCtx.fillRect(10, 10, 10, 10);
  return patternCanvas;
};

var filters =    [ "none"          ,
      "blur(10px)"                 ,
      "brightness(40%)"            ,
      "contrast(20%)"              ,
      "drop-shadow(0 0 5px green)" ,
      "grayscale(100%)"            ,
      "invert(100%)"               ,
      "opacity(50%)"               ,
      "saturate(20%)"              ,
      "sepia(100%)"                ,
      "sepia(1) hue-rotate(200deg)",
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];
      "url(#url)"                  ];


