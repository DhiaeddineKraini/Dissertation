<!DOCTYPE html>
<link rel="help" href="https://drafts.csswg.org/css-scroll-anchoring/">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<style>

#expander {
  margin-bottom: 1px;
}
#no {
  overflow-anchor: none;
}
#spacing {
  margin-bottom: 300vh;
}

</style>
<span>out of view</span>
<div id="expander"></div>
<div id="expander"></div>
<div id="spacing"></div>
<script><script>

// Tests that an inline element can be an excluded subtree.

test(() => {
  scrollTo(0, 50);
  document.querySelector('#expander').style = "margin-bottom: 50px;
}
#no {
  overflow-anchor: none;
}
#spacing {
  margin-bottom: 300vh;
}

</style>
<span>out of view</span>
<span id="no"><script>excluded subtree <span>[nested inline]</span></span>
<span id="no">excluded subtree <span>[nested inline]</span></span>
<div id="spacing"></div>
<script><script><script><script><script><script><script>

// Tests that an inline element can be an excluded subtree.

test(() => {
  scrollTo(0, 50);
  document.querySelector('#expander').style = "margin-bottom: 100px";
  assert_equals(document.scrollingElement.scrollTop, 50,
      "Scroll anchoring should not anchor within the span.");
  scrollTo(0, 0);
});

</script></script></script></script></script></script></script>
